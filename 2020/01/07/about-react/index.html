<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('https://songqiuxiao.github.io').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.6.0',
    exturl: false,
    sidebar: {"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="Ë™â°™Ë™æœ€è¿‘çš„å·¥ä½œä¸€ç›´åœ¨ä½¿ç”¨Reactï¼Œå·²ç»å·®ä¸å¤šäº”ä¸ªæœˆäº†ï¼Œæƒ³ç»™è‡ªå·±å†™äº›å¯¹reactçš„ä¸€äº›æ€è€ƒå’Œæ€»ç»“ã€‚ä¹Ÿè®°å½•ä¸€ä¸‹å½“åˆåˆšä¸Šæ‰‹æ—¶çš„ç–‘æƒ‘ï¼Œæ–¹ä¾¿åç»­è‡ªå·±å›é¡¾ã€‚ç½‘ä¸Šå„ç§è¨€è®ºè¯´ React ä¸Šæ‰‹æ¯” Vue éš¾ï¼Œå¯èƒ½éš¾å°±éš¾ä¸èƒ½æ·±åˆ»ç†è§£ JSXï¼Œæˆ–è€…å¯¹ ES6 çš„ä¸€äº›ç‰¹æ€§ç†è§£å¾—ä¸å¤Ÿæ·±åˆ»ï¼Œå¯¼è‡´è§‰å¾—æœ‰äº›ç‚¹éš¾ä»¥ç†è§£ï¼Œç„¶åè¯´ React æ¯”è¾ƒéš¾ä¸Šæ‰‹ï¼Œè¿˜åäººç±»å•¥çš„ï¼Œæ€€æ£ç€æ•¬ç•ä¹‹å¿ƒï¼Œå‘ç°å…¶å®ä¹Ÿæ²¡é‚£ä¹ˆçš„å¤æ‚å˜›â€¦">
<meta property="og:type" content="article">
<meta property="og:title" content="å…³äºReactË™â°™Ë™">
<meta property="og:url" content="https:&#x2F;&#x2F;songqiuxiao.github.io&#x2F;2020&#x2F;01&#x2F;07&#x2F;about-react&#x2F;index.html">
<meta property="og:site_name" content="å®‹ç§‹æ™“">
<meta property="og:description" content="Ë™â°™Ë™æœ€è¿‘çš„å·¥ä½œä¸€ç›´åœ¨ä½¿ç”¨Reactï¼Œå·²ç»å·®ä¸å¤šäº”ä¸ªæœˆäº†ï¼Œæƒ³ç»™è‡ªå·±å†™äº›å¯¹reactçš„ä¸€äº›æ€è€ƒå’Œæ€»ç»“ã€‚ä¹Ÿè®°å½•ä¸€ä¸‹å½“åˆåˆšä¸Šæ‰‹æ—¶çš„ç–‘æƒ‘ï¼Œæ–¹ä¾¿åç»­è‡ªå·±å›é¡¾ã€‚ç½‘ä¸Šå„ç§è¨€è®ºè¯´ React ä¸Šæ‰‹æ¯” Vue éš¾ï¼Œå¯èƒ½éš¾å°±éš¾ä¸èƒ½æ·±åˆ»ç†è§£ JSXï¼Œæˆ–è€…å¯¹ ES6 çš„ä¸€äº›ç‰¹æ€§ç†è§£å¾—ä¸å¤Ÿæ·±åˆ»ï¼Œå¯¼è‡´è§‰å¾—æœ‰äº›ç‚¹éš¾ä»¥ç†è§£ï¼Œç„¶åè¯´ React æ¯”è¾ƒéš¾ä¸Šæ‰‹ï¼Œè¿˜åäººç±»å•¥çš„ï¼Œæ€€æ£ç€æ•¬ç•ä¹‹å¿ƒï¼Œå‘ç°å…¶å®ä¹Ÿæ²¡é‚£ä¹ˆçš„å¤æ‚å˜›â€¦">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https:&#x2F;&#x2F;songqiuxiao.github.io&#x2F;2020&#x2F;01&#x2F;07&#x2F;about-react&#x2F;1.jpg">
<meta property="article:published_time" content="2020-01-07T07:19:08.000Z">
<meta property="article:modified_time" content="2020-01-21T03:07:27.688Z">
<meta property="article:author" content="å®‹ç§‹æ™“">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;songqiuxiao.github.io&#x2F;2020&#x2F;01&#x2F;07&#x2F;about-react&#x2F;1.jpg">

<link rel="canonical" href="https://songqiuxiao.github.io/2020/01/07/about-react/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>å…³äºReactË™â°™Ë™ | å®‹ç§‹æ™“</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">å®‹ç§‹æ™“</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">You are the JavaScript in my HTML</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://songqiuxiao.github.io/2020/01/07/about-react/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.png">
      <meta itemprop="name" content="å®‹ç§‹æ™“">
      <meta itemprop="description" content="å­¦ä¹ æ€»ç»“ æ€è€ƒæ„Ÿæ‚Ÿ çŸ¥è¯†ç®¡ç†">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å®‹ç§‹æ™“">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          å…³äºReactË™â°™Ë™
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-01-07 15:19:08" itemprop="dateCreated datePublished" datetime="2020-01-07T15:19:08+08:00">2020-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-01-21 11:07:27" itemprop="dateModified" datetime="2020-01-21T11:07:27+08:00">2020-01-21</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>Ë™â°™Ë™æœ€è¿‘çš„å·¥ä½œä¸€ç›´åœ¨ä½¿ç”¨Reactï¼Œå·²ç»å·®ä¸å¤šäº”ä¸ªæœˆäº†ï¼Œæƒ³ç»™è‡ªå·±å†™äº›å¯¹reactçš„ä¸€äº›æ€è€ƒå’Œæ€»ç»“ã€‚ä¹Ÿè®°å½•ä¸€ä¸‹å½“åˆåˆšä¸Šæ‰‹æ—¶çš„ç–‘æƒ‘ï¼Œæ–¹ä¾¿åç»­è‡ªå·±å›é¡¾ã€‚<br>ç½‘ä¸Šå„ç§è¨€è®ºè¯´ React ä¸Šæ‰‹æ¯” Vue éš¾ï¼Œå¯èƒ½éš¾å°±éš¾ä¸èƒ½æ·±åˆ»ç†è§£ JSXï¼Œæˆ–è€…å¯¹ ES6 çš„ä¸€äº›ç‰¹æ€§ç†è§£å¾—ä¸å¤Ÿæ·±åˆ»ï¼Œå¯¼è‡´è§‰å¾—æœ‰äº›ç‚¹éš¾ä»¥ç†è§£ï¼Œç„¶åè¯´ React æ¯”è¾ƒéš¾ä¸Šæ‰‹ï¼Œè¿˜åäººç±»å•¥çš„ï¼Œæ€€æ£ç€æ•¬ç•ä¹‹å¿ƒï¼Œå‘ç°å…¶å®ä¹Ÿæ²¡é‚£ä¹ˆçš„å¤æ‚å˜›â€¦</p>
<a id="more"></a>
<h4 id="ä¸ºä»€ä¹ˆè¦å¼•å…¥-React"><a href="#ä¸ºä»€ä¹ˆè¦å¼•å…¥-React" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å¼•å…¥ React"></a>ä¸ºä»€ä¹ˆè¦å¼•å…¥ React</h4><p>åœ¨å†™ React çš„æ—¶å€™ï¼Œä½ å¯èƒ½ä¼šå†™ç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...other code</span></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>æˆ‘æ˜¯ä¸€é¢—å°æ¾çƒË™â°™Ë™<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¤´ä¸€æ¬¡æ¥è§¦çš„æ—¶å€™è‚¯å®šç–‘æƒ‘è¿‡ï¼Œä¸‹é¢çš„ä»£ç éƒ½æ²¡æœ‰ç”¨åˆ° Reactï¼Œä¸ºä»€ä¹ˆè¦å¼•å…¥ React å‘¢ï¼Ÿ</p>
<p>å¦‚æœä½ æŠŠ import React from â€˜reactâ€™ åˆ æ‰ï¼Œè¿˜ä¼šæŠ¥ä¸‹é¢è¿™æ ·çš„é”™è¯¯ï¼š<br><img src="/2020/01/07/about-react/1.jpg" alt="img"><br>é‚£ä¹ˆç©¶ç«Ÿæ˜¯å“ªé‡Œç”¨åˆ°äº†è¿™ä¸ª Reactï¼Œå¯¼è‡´æˆ‘ä»¬å¼•å…¥ React ä¼šæŠ¥é”™å‘¢ï¼Œä¸æ‡‚è¿™ä¸ªåŸå› ï¼Œé‚£ä¹ˆå°±æ˜¯ JSX æ²¡æœ‰æå¾—å¤ªæ˜ç™½ã€‚</p>
<p>ä½ å¯ä»¥è®²ä¸Šé¢çš„ä»£ç (å¿½ç•¥å¯¼å…¥è¯­å¥)æ”¾åˆ°åœ¨çº¿ babel é‡Œè¿›è¡Œè½¬åŒ–ä¸€ä¸‹ï¼Œå‘ç° babel ä¼šæŠŠä¸Šé¢çš„ä»£ç è½¬åŒ–æˆ:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...other code</span></span><br><span class="line">  <span class="keyword">return</span> React.createElement(<span class="string">"h1"</span>, <span class="literal">null</span>, <span class="string">"æˆ‘æ˜¯ä¸€é¢—å°æ¾çƒË™â°™Ë™"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºä»æœ¬è´¨ä¸Šè®²ï¼ŒJSX åªæ˜¯ä¸º <code>React.createElement(component, props, ...children)</code> å‡½æ•°æä¾›çš„è¯­æ³•ç³–ã€‚</p>
<h4 id="ä¸ºä»€ä¹ˆè¦ç”¨-className-è€Œä¸ç”¨-class"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨-className-è€Œä¸ç”¨-class" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨ className è€Œä¸ç”¨ class"></a>ä¸ºä»€ä¹ˆè¦ç”¨ <code>className</code> è€Œä¸ç”¨ <code>class</code></h4><ul>
<li>è®¾è®¡ç†å¿µ<br>è¿™ä¸ªå…¶å®æ˜¯å› ä¸ºReact ä¸€å¼€å§‹çš„ç†å¿µæ˜¯æƒ³ä¸æµè§ˆå™¨çš„ DOM API ä¿æŒä¸€ç›´è€Œä¸æ˜¯ HTMLï¼Œå› ä¸º JSX æ˜¯ JS çš„æ‰©å±•ï¼Œè€Œä¸æ˜¯ç”¨æ¥ä»£æ›¿ HTML çš„ï¼Œè¿™æ ·ä¼šå’Œå…ƒç´ çš„åˆ›å»ºæ›´ä¸ºæ¥è¿‘ã€‚åœ¨å…ƒç´ ä¸Šè®¾ç½® class éœ€è¦ä½¿ç”¨ className è¿™ä¸ª APIï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> element = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>)</span><br><span class="line">element.className = <span class="string">"hello"</span></span><br></pre></td></tr></table></figure></li>
<li>å…³é”®å­—ä¸æ”¯æŒ<br>æµè§ˆå™¨é—®é¢˜ï¼ŒES5 ä¹‹å‰ï¼Œåœ¨å¯¹è±¡ä¸­ä¸èƒ½ä½¿ç”¨ä¿ç•™å­—ã€‚ä»¥ä¸‹ä»£ç åœ¨ IE8 ä¸­å°†ä¼šæŠ›å‡ºé”™è¯¯ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> element = &#123;</span><br><span class="line"> attributes: &#123;</span><br><span class="line">   class: "hello"</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
è§£æ„é—®é¢˜ï¼Œå½“ä½ åœ¨è§£æ„å±æ€§çš„æ—¶å€™ï¼Œå¦‚æœåˆ†é…ä¸€ä¸ª class å˜é‡ä¼šå‡ºé—®é¢˜ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="class"><span class="keyword">class</span> &#125; </span>= &#123; <span class="attr">class</span>: <span class="string">'foo'</span> &#125; <span class="comment">// Uncaught SyntaxError: Unexpected token &#125;</span></span><br><span class="line"><span class="keyword">const</span> &#123; className &#125; = &#123; <span class="attr">className</span>: <span class="string">'foo'</span> &#125; </span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">class</span>: className &#125; = &#123; <span class="attr">class</span>: <span class="string">'foo'</span> &#125;</span><br></pre></td></tr></table></figure>
å…¶ä»–è®¨è®ºå¯ç»§ç»­æ·±åº¦æœç´¢ï¼šã€æœ‰è¶£çš„è¯é¢˜ï¼Œä¸ºä»€ä¹ˆjsxç”¨classNameè€Œä¸æ˜¯classã€</li>
</ul>
<h4 id="ä¸ºä»€ä¹ˆå±æ€§è¦ç”¨å°é©¼å³°"><a href="#ä¸ºä»€ä¹ˆå±æ€§è¦ç”¨å°é©¼å³°" class="headerlink" title="ä¸ºä»€ä¹ˆå±æ€§è¦ç”¨å°é©¼å³°"></a>ä¸ºä»€ä¹ˆå±æ€§è¦ç”¨å°é©¼å³°</h4><blockquote>
<p>å› ä¸º JSX è¯­æ³•ä¸Šæ›´æ¥è¿‘ JavaScript è€Œä¸æ˜¯ HTMLï¼Œæ‰€ä»¥ React DOM ä½¿ç”¨ camelCaseï¼ˆå°é©¼å³°å‘½åï¼‰æ¥å®šä¹‰å±æ€§çš„åç§°ï¼Œè€Œä¸ä½¿ç”¨ HTML å±æ€§åç§°çš„å‘½åçº¦å®šã€‚<br><cite><a href="https://react.docschina.org/docs/introducing-jsx.html" target="_blank" rel="noopener">æ¥è‡ª JSX ç®€ä»‹</a></cite></p>
</blockquote>
<h4 id="ä¸ºä»€ä¹ˆ-constructor-é‡Œè¦è°ƒç”¨-super-å’Œä¼ é€’-props"><a href="#ä¸ºä»€ä¹ˆ-constructor-é‡Œè¦è°ƒç”¨-super-å’Œä¼ é€’-props" class="headerlink" title="ä¸ºä»€ä¹ˆ constructor é‡Œè¦è°ƒç”¨ super å’Œä¼ é€’ props"></a>ä¸ºä»€ä¹ˆ constructor é‡Œè¦è°ƒç”¨ super å’Œä¼ é€’ props</h4><p>è¿™æ˜¯å®˜ç½‘çš„ä¸€æ®µä»£ç ï¼Œå…·ä½“è§ï¼š<a href="https://react.docschina.org/docs/state-and-lifecycle.html" target="_blank" rel="noopener">çŠ¶æ€(State) å’Œ ç”Ÿå‘½å‘¨æœŸ</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clock</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);<span class="comment">// Ë™â°™Ë™å’©å•Šï¼Ÿ</span></span><br><span class="line">    <span class="keyword">this</span>.state = &#123;<span class="attr">date</span>: <span class="keyword">new</span> <span class="built_in">Date</span>()&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;Hello, world!<span class="xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">        &lt;h2&gt;It is &#123;<span class="keyword">this</span>.state.date.toLocaleTimeString()&#125;.&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è€Œä¸”æœ‰è¿™ä¹ˆä¸€æ®µè¯ï¼Œä¸ä»…è®©æˆ‘ä»¬è°ƒç”¨ super è¿˜è¦æŠŠ props ä¼ é€’è¿›å»ï¼Œä½†æ˜¯æ²¡æœ‰å‘Šè¯‰æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšã€‚<br>ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰ç–‘æƒ‘è¿‡ä¸ºä»€ä¹ˆè¦è°ƒç”¨ super å’Œä¼ é€’ propsï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥è§£å¼€è°œé¢˜å§ã€‚</p>
<h5 id="ä¸ºä»€ä¹ˆè¦è°ƒç”¨-super"><a href="#ä¸ºä»€ä¹ˆè¦è°ƒç”¨-super" class="headerlink" title="ä¸ºä»€ä¹ˆè¦è°ƒç”¨ super"></a>ä¸ºä»€ä¹ˆè¦è°ƒç”¨ <code>super</code></h5><p>å…¶å®è¿™ä¸æ˜¯ React çš„é™åˆ¶ï¼Œè¿™æ˜¯ JavaScript çš„é™åˆ¶ï¼Œåœ¨æ„é€ å‡½æ•°é‡Œå¦‚æœè¦è°ƒç”¨ <code>this</code>ï¼Œé‚£ä¹ˆæå‰å°±è¦è°ƒç”¨ superï¼Œåœ¨ React é‡Œï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šåœ¨æ„é€ å‡½æ•°é‡Œåˆå§‹åŒ– <code>stateï¼Œthis.state = xxx</code> ï¼Œæ‰€ä»¥éœ€è¦è°ƒç”¨ <code>super</code>ã€‚</p>
<h5 id="ä¸ºä»€ä¹ˆè¦ä¼ é€’-props"><a href="#ä¸ºä»€ä¹ˆè¦ä¼ é€’-props" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä¼ é€’ props`"></a>ä¸ºä»€ä¹ˆè¦ä¼ é€’ props`</h5><p>ä½ å¯èƒ½ä»¥ä¸ºå¿…é¡»ç»™ <code>super</code> ä¼ å…¥ <code>props</code>ï¼Œå¦åˆ™ <code>React.Component</code> å°±æ²¡æ³•åˆå§‹åŒ– <code>this.props</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">this</span>.props = props;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡ï¼Œå¦‚æœä½ ä¸å°å¿ƒæ¼ä¼ äº† propsï¼Œç›´æ¥è°ƒç”¨äº† super()ï¼Œä½ ä»ç„¶å¯ä»¥åœ¨ render å’Œå…¶ä»–æ–¹æ³•ä¸­è®¿é—® this.propsï¼ˆä¸ä¿¡çš„è¯å¯ä»¥è¯•è¯•å˜›Ë™â°™Ë™ï¼‰ã€‚</p>
<p>ä¸ºå•¥è¿™æ ·ä¹Ÿè¡Œï¼Ÿå› ä¸ºReact ä¼šåœ¨æ„é€ å‡½æ•°è¢«è°ƒç”¨ä¹‹åï¼Œä¼šæŠŠ props èµ‹å€¼ç»™åˆšåˆšåˆ›å»ºçš„å®ä¾‹å¯¹è±¡ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> instance = <span class="keyword">new</span> YourComponent(props);</span><br><span class="line">instance.props = props;</span><br></pre></td></tr></table></figure>
<p><code>props</code> æ‰€ä»¥è¯´ä¸ä¼ ä¹Ÿèƒ½ç”¨ï¼Œæ˜¯æœ‰åŸå› çš„ã€‚</p>
<p>ä½†è¿™æ„å‘³ç€ä½ åœ¨ä½¿ç”¨ React æ—¶ï¼Œå¯ä»¥ç”¨ <code>super()</code> ä»£æ›¿ <code>super(props)</code> äº†ä¹ˆï¼Ÿ</p>
<p>é‚£è¿˜æ˜¯ä¸è¡Œçš„ï¼Œä¸ç„¶å®˜ç½‘ä¹Ÿä¸ä¼šå»ºè®®ä½ è°ƒç”¨ <code>props</code> äº†ï¼Œè™½ç„¶ React ä¼šåœ¨æ„é€ å‡½æ•°è¿è¡Œä¹‹åï¼Œä¸º <code>this.props</code> èµ‹å€¼ï¼Œä½†åœ¨ <code>super()</code> è°ƒç”¨ä¹‹åä¸æ„é€ å‡½æ•°ç»“æŸä¹‹å‰ï¼Œ <code>this.props</code> ä»ç„¶æ˜¯æ²¡æ³•ç”¨çš„ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Inside React</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">this</span>.props = props;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Inside your code</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Button</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(); <span class="comment">// ğŸ˜¬ å¿˜äº†ä¼ å…¥ props</span></span><br><span class="line">    <span class="built_in">console</span>.log(props); <span class="comment">// âœ… &#123;&#125;</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.props); <span class="comment">// ğŸ˜¬ undefined</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¦æ˜¯æ„é€ å‡½æ•°ä¸­è°ƒç”¨äº†æŸä¸ªè®¿é—® <code>props</code>çš„æ–¹æ³•ï¼Œé‚£è¿™ä¸ª bug å°±æ›´éš¾å®šä½äº†ã€‚å› æ­¤å¼ºçƒˆå»ºè®®å§‹ç»ˆä½¿ç”¨<code>super(props)</code>ï¼Œå³ä½¿è¿™ä¸æ˜¯å¿…é¡»çš„ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Button</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props); <span class="comment">// âœ… We passed props</span></span><br><span class="line">    <span class="built_in">console</span>.log(props); <span class="comment">// âœ… &#123;&#125;</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.props); <span class="comment">// âœ… &#123;&#125;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç ç¡®ä¿ <code>this.props</code> å§‹ç»ˆæ˜¯æœ‰å€¼çš„ã€‚</p>
<p>å¦‚æœä½ æƒ³é¿å…ä»¥ä¸Šçš„é—®é¢˜ï¼Œä½ å¯ä»¥é€šè¿‡<code>class</code>å±æ€§ææ¡ˆ æ¥ç®€åŒ–ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clock</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;<span class="attr">date</span>: <span class="keyword">new</span> <span class="built_in">Date</span>()&#125;;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;Hello, world!<span class="xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">        &lt;h2&gt;It is &#123;<span class="keyword">this</span>.state.date.toLocaleTimeString()&#125;.&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ä¸ºä»€ä¹ˆç»„ä»¶ç”¨å¤§å†™å¼€å¤´"><a href="#ä¸ºä»€ä¹ˆç»„ä»¶ç”¨å¤§å†™å¼€å¤´" class="headerlink" title="ä¸ºä»€ä¹ˆç»„ä»¶ç”¨å¤§å†™å¼€å¤´"></a>ä¸ºä»€ä¹ˆç»„ä»¶ç”¨å¤§å†™å¼€å¤´</h4><p>å‰é¢ä»¥åŠè¯´è¿‡äº†ï¼ŒJSX æ˜¯ä¸º <code>React.createElement(component, props, â€¦children)</code> æä¾›çš„è¯­æ³•ç³–ï¼Œcomponent çš„ç±»å‹æ˜¯ï¼šstring/ReactClass typeï¼Œæˆ‘ä»¬å…·ä½“çœ‹ä¸€ä¸‹åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šç”¨åˆ° string ç±»å‹ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ç”¨åˆ° ReactClass type ç±»å‹</p>
<ul>
<li>string ç±»å‹reactä¼šè§‰å¾—ä»–æ˜¯ä¸€ä¸ªåŸç”ŸdomèŠ‚ç‚¹</li>
<li>ReactClass type ç±»å‹ è‡ªå®šä¹‰ç»„ä»¶</li>
</ul>
<p>ä¾‹å¦‚ï¼ˆstringï¼‰ï¼šåœ¨ jsx ä¸­æˆ‘ä»¬å†™ä¸€ä¸ª</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è½¬æ¢ä¸ºjsçš„æ—¶å€™å°±å˜æˆäº†</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">React.createElement(<span class="string">"div"</span>, <span class="literal">null</span>)</span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼ˆReactClass typeï¼‰ï¼šåœ¨jsxä¸­æˆ‘ä»¬å†™ä¸€ä¸ª</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyDiv</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (&lt;div&gt;&lt;div&gt;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;MyDiv&gt;&lt;/MyDiv&gt;</span><br></pre></td></tr></table></figure>
<p>è½¬æ¢ä¸ºjsçš„æ—¶å€™å°±å˜æˆäº†</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyDiv</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> React.createElement(<span class="string">"div"</span>, <span class="literal">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">React.createElement(MyDiv, <span class="literal">null</span>);</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¾¹çš„ä¾‹å­ä¸­å¦‚æœå°†MyDivä¸­çš„é¦–å­—æ¯å°å†™ï¼Œå¦‚ä¸‹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myDiv</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (&lt;div&gt;&lt;div&gt;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;myDiv&gt;&lt;/myDiv&gt;</span><br></pre></td></tr></table></figure>
<p>è½¬æ¢ä¸º js çš„æ—¶å€™å°±å˜æˆäº†</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyDiv</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> React.createElement(<span class="string">"div"</span>, <span class="literal">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">React.createElement(<span class="string">"myDiv"</span>, <span class="literal">null</span>);</span><br></pre></td></tr></table></figure>
<p>ç”±äºæ‰¾ä¸åˆ° myDiv è¿™ä¸ª domï¼Œæ‰€ä»¥å°±ä¼šæŠ¥é”™ã€‚</p>
<h4 id="ä¸ºä»€ä¹ˆè°ƒç”¨æ–¹æ³•è¦-bind-this"><a href="#ä¸ºä»€ä¹ˆè°ƒç”¨æ–¹æ³•è¦-bind-this" class="headerlink" title="ä¸ºä»€ä¹ˆè°ƒç”¨æ–¹æ³•è¦ bind this"></a>ä¸ºä»€ä¹ˆè°ƒç”¨æ–¹æ³•è¦ <code>bind this</code></h4><p><strong>é¦–å…ˆï¼Œä½ éœ€è¦æ·±åˆ»çš„ç†è§£ JavaScript ä¸­çš„ <code>this</code></strong></p>
<p>ç›¸ä¿¡åˆšå†™ React çš„æ—¶å€™ï¼Œå¾ˆå¤šæœ‹å‹å¯èƒ½ä¼šå†™ç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  handleClick () &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">xxx</span>: aaa &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;button onClick=&#123;<span class="keyword">this</span>.handleClick&#125;&gt;</span><br><span class="line">        Click me</span><br><span class="line">      &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>å‘ç°ä¼šæŠ¥ <code>this</code> æ˜¯ <code>undefined</code> çš„é”™ï¼Œç„¶åå¯èƒ½å¯¹äº‹ä»¶å¤„ç†æ¯”è¾ƒç–‘æƒ‘ï¼Œç„¶åå»çœ‹å®˜ç½‘çš„äº‹ä»¶å¤„ç†æœ‰ä¸‹é¢ä¸€æ®µè¯ï¼š</p>
<p>ä½ å¿…é¡»è°¨æ…å¯¹å¾… JSX å›è°ƒå‡½æ•°ä¸­çš„ <code>this</code>ï¼Œåœ¨ JavaScript ä¸­ï¼Œclass çš„æ–¹æ³•é»˜è®¤ä¸ä¼šç»‘å®š<code>this</code>ã€‚å¦‚æœä½ å¿˜è®°ç»‘å®š <code>this.handleClick</code> å¹¶æŠŠå®ƒä¼ å…¥äº† <code>onClick</code>ï¼Œå½“ä½ è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ <code>this</code> çš„å€¼ä¸º <code>undefined</code>ã€‚<br>è¿™å¹¶ä¸æ˜¯ React ç‰¹æœ‰çš„è¡Œä¸ºï¼›è¿™å…¶å®ä¸ JavaScript å‡½æ•°å·¥ä½œåŸç†æœ‰å…³ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœä½ æ²¡æœ‰åœ¨æ–¹æ³•åé¢æ·»åŠ  <code>()</code>ï¼Œä¾‹å¦‚ <code>onClick={this.handleClick}</code>ï¼Œä½ åº”è¯¥ä¸ºè¿™ä¸ªæ–¹æ³•ç»‘å®š <code>this</code>ã€‚<br>ç„¶åä½ çœ‹äº†å®˜ç½‘çš„ä¾‹å­å’Œå»ºè®®ä¹‹åï¼ŒçŸ¥é“éœ€è¦ä¸ºäº‹ä»¶å¤„ç†å‡½æ•°ç»‘å®š <code>this</code> å°±èƒ½è§£å†³ï¼Œåƒä¸‹é¢è¿™æ ·ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  handleClick () &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">xxx</span>: aaa &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;button onClick=&#123;<span class="keyword">this</span>.handleClick.bind(<span class="keyword">this</span>)&#125;&gt;</span><br><span class="line">        Click me</span><br><span class="line">      &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯å¯èƒ½ä½ æ²¡æœ‰å»æ€è€ƒè¿‡ä¸ºä»€ä¹ˆéœ€è¦ <code>bind this</code>ï¼Ÿå¦‚æœä½ ä¸èƒ½ç†è§£çš„è¯ï¼Œé‚£å°±è¿˜æ˜¯ js çš„åŸºç¡€æ²¡æœ‰æ‰“å¥½ã€‚</p>
<h5 id="React-æ˜¯å¦‚ä½•å¤„ç†äº‹ä»¶çš„ï¼Ÿ"><a href="#React-æ˜¯å¦‚ä½•å¤„ç†äº‹ä»¶çš„ï¼Ÿ" class="headerlink" title="React æ˜¯å¦‚ä½•å¤„ç†äº‹ä»¶çš„ï¼Ÿ"></a>React æ˜¯å¦‚ä½•å¤„ç†äº‹ä»¶çš„ï¼Ÿ</h5><p>å’±ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹ React æ˜¯å¦‚ä½•å¤„ç†äº‹ä»¶çš„ã€‚</p>
<p>React çš„äº‹ä»¶æ˜¯åˆæˆäº‹ä»¶ï¼Œ å†…éƒ¨åŸç†éå¸¸å¤æ‚ï¼Œè¿™é‡ŒåªæŠŠå…³é”®æ€§ï¼Œå¯ä»¥ç”¨æ¥è§£ç­”è¿™ä¸ªé—®é¢˜çš„åŸç†éƒ¨åˆ†è¿›è¡Œä»‹ç»</p>
<p>ä¸Šç¯‡å·²ç»è¯´è¿‡ï¼Œjsx å®é™…ä¸Šæ˜¯ <code>React.createElement(component, props, â€¦children)</code> å‡½æ•°æä¾›çš„è¯­æ³•ç³–ï¼Œé‚£ä¹ˆè¿™æ®µ jsx ä»£ç ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="keyword">this</span>.handleClick&#125;&gt;</span><br><span class="line">   Click me</span><br><span class="line">&lt;<span class="regexp">/button&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¼šè¢«è½¬åŒ–ä¸ºï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">React.createElement(<span class="string">"button"</span>, &#123;</span><br><span class="line">    onClick: <span class="keyword">this</span>.handleClick</span><br><span class="line">&#125;, <span class="string">"Click me"</span>)</span><br></pre></td></tr></table></figure>
<p>äº†è§£äº†ä¸Šé¢çš„ï¼Œç„¶åç®€å•çš„ç†è§£ react å¦‚ä½•å¤„ç†äº‹ä»¶çš„ï¼ŒReact åœ¨ç»„ä»¶åŠ è½½(mount)å’Œæ›´æ–°(update)æ—¶ï¼Œå°†äº‹ä»¶é€šè¿‡ <code>addEventListener</code>  ç»Ÿä¸€æ³¨å†Œåˆ° <code>document ä¸Š</code>ï¼Œç„¶åä¼šæœ‰ä¸€ä¸ªäº‹ä»¶æ± å­˜å‚¨äº†æ‰€æœ‰çš„äº‹ä»¶ï¼Œå½“äº‹ä»¶è§¦å‘çš„æ—¶å€™ï¼Œé€šè¿‡ <code>dispatchEvent</code> è¿›è¡Œäº‹ä»¶åˆ†å‘ã€‚</p>
<p>æ‰€ä»¥ä½ å¯ä»¥ç®€å•çš„ç†è§£ä¸ºï¼Œæœ€ç»ˆ <code>this.handleClick</code> ä¼šä½œä¸ºä¸€ä¸ªå›è°ƒå‡½æ•°è°ƒç”¨ã€‚</p>
<p>ç†è§£äº†è¿™ä¸ªï¼Œç„¶åå†æ¥çœ‹çœ‹å›è°ƒå‡½æ•°ä¸ºä»€ä¹ˆå°±ä¼šä¸¢å¤± <code>this</code>ã€‚</p>
<h5 id="this-ç®€å•å›é¡¾"><a href="#this-ç®€å•å›é¡¾" class="headerlink" title="this ç®€å•å›é¡¾"></a><code>this</code> ç®€å•å›é¡¾</h5><blockquote>
<p>åœ¨å‡½æ•°å†…éƒ¨ï¼Œ<code>this</code>çš„å€¼å–å†³äºå‡½æ•°è¢«è°ƒç”¨çš„æ–¹å¼ã€‚</p>
</blockquote>
<p>é€šè¿‡ä¸Šé¢å¯¹äº‹ä»¶å¤„ç†çš„ä»‹ç»ï¼Œæ¥æ¨¡æ‹Ÿä¸€ä¸‹åœ¨ç±»ç»„ä»¶çš„ render å‡½æ•°ä¸­ï¼Œ æœ‰ç‚¹ç±»ä¼¼äºåšäº†è¿™æ ·çš„æ“ä½œ:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">    sayThis () &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">// è¿™é‡Œçš„ `this` æŒ‡å‘è°ï¼Ÿ</span></span><br><span class="line">    &#125;</span><br><span class="line">    exec (cb) &#123;</span><br><span class="line">        cb();</span><br><span class="line">    &#125;</span><br><span class="line">    render () &#123;</span><br><span class="line">        <span class="keyword">this</span>.exec(<span class="keyword">this</span>.sayThis);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> foo = <span class="keyword">new</span> Foo();</span><br><span class="line">foo.render(); <span class="comment">// è¾“å‡ºç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</span></span><br></pre></td></tr></table></figure>
<p>ä½ ä¼šå‘ç°æœ€ç»ˆç»“æœè¾“å‡ºçš„æ˜¯ <code>undefined</code>ï¼Œé‚£ä¹ˆæˆ‘è§‰å¾—ä½ ä¹Ÿå¯ä»¥ç†è§£ä¸ºä»€ä¹ˆéœ€è¦ <code>bind this</code> äº†ã€‚ï¼ˆå°±æ˜¯cbè°ƒç”¨çš„æ—¶å€™ï¼ŒæŠŠthisæä¸¢æƒ¹Ë™â°™Ë™ï¼‰</p>
<p>é‚£ä¹ˆä½ å¯èƒ½ä¼šé—®ï¼šä¸ºä»€ä¹ˆReactæ²¡æœ‰è‡ªåŠ¨çš„æŠŠ <code>bind</code> é›†æˆåˆ° <code>render</code> æ–¹æ³•ä¸­å‘¢?åœ¨ <code>exec</code> è°ƒç”¨å›è°ƒçš„æ—¶å€™ç»‘å®šè¿›å»ï¼Œåƒè¿™æ ·ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">    sayThis () &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">// è¿™é‡Œçš„ `this` æŒ‡å‘è°ï¼Ÿ</span></span><br><span class="line">    &#125;</span><br><span class="line">    exec (cb) &#123;</span><br><span class="line">        cb().bind(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    render () &#123;</span><br><span class="line">        <span class="keyword">this</span>.exec(<span class="keyword">this</span>.sayThis);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> foo = <span class="keyword">new</span> Foo();</span><br><span class="line">foo.render(); <span class="comment">// è¾“å‡ºç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</span></span><br></pre></td></tr></table></figure>
<p><strong>å› ä¸º <code>render</code> å¤šæ¬¡è°ƒç”¨æ¯æ¬¡éƒ½è¦ <code>bind</code> ä¼šå½±å“æ€§èƒ½ï¼Œæ‰€ä»¥å®˜æ–¹å»ºè®®ä½ è‡ªå·±åœ¨ <code>constructor</code> ä¸­æ‰‹åŠ¨ <code>bind</code> è¾¾åˆ°æ€§èƒ½ä¼˜åŒ–ã€‚</strong></p>
<h5 id="å››ç§äº‹ä»¶å¤„ç†å¯¹æ¯”"><a href="#å››ç§äº‹ä»¶å¤„ç†å¯¹æ¯”" class="headerlink" title="å››ç§äº‹ä»¶å¤„ç†å¯¹æ¯”"></a>å››ç§äº‹ä»¶å¤„ç†å¯¹æ¯”</h5><p>å¯¹äºäº‹ä»¶å¤„ç†çš„å†™æ³•ä¹Ÿæœ‰å¥½å‡ ç§ï¼Œå’±ä»¬æ¥è¿›è¡Œå¯¹æ¯”ä¸€ä¸‹ï¼š</p>
<ol>
<li>ç›´æ¥ bind this å‹<br>å°±æ˜¯åƒæ–‡ç« å¼€å§‹çš„é‚£æ ·ï¼Œç›´æ¥åœ¨äº‹ä»¶é‚£é‡Œ bind this<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  handleClick () &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">xxx</span>: aaa &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;button onClick=&#123;<span class="keyword">this</span>.handleClick.bind(<span class="keyword">this</span>)&#125;&gt;</span><br><span class="line">        Click me</span><br><span class="line">      &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>ä¼˜ç‚¹</strong>ï¼šå†™èµ·æ¥é¡ºæ‰‹ï¼Œä¸€å£æ°”å°±èƒ½æŠŠè¿™ä¸ªé€»è¾‘å†™å®Œï¼Œä¸ç”¨ç§»åŠ¨å…‰æ ‡åˆ°å…¶ä»–åœ°æ–¹ã€‚<br><strong>ç¼ºç‚¹</strong>ï¼šæ€§èƒ½ä¸å¤ªå¥½ï¼Œè¿™ç§æ–¹å¼è·Ÿ react å†…éƒ¨å¸®ä½  bind ä¸€æ ·çš„ï¼Œæ¯æ¬¡ render éƒ½ä¼šè¿›è¡Œ bindï¼Œè€Œä¸”å¦‚æœæœ‰ä¸¤ä¸ªå…ƒç´ çš„äº‹ä»¶å¤„ç†å‡½æ•°å¼åŒä¸€ä¸ªï¼Œä¹Ÿè¿˜æ˜¯è¦è¿›è¡Œ bindï¼Œè¿™æ ·ä¼šå¤šå†™ç‚¹ä»£ç ï¼Œè€Œä¸”è¿›è¡Œä¸¤æ¬¡ bindï¼Œæ€§èƒ½ä¸æ˜¯å¤ªå¥½ã€‚(ä¸è¿‡å…¶å®è¿™ç‚¹æ€§èƒ½å¾€å¾€ä¸ä¼šæ˜¯æ€§èƒ½ç“¶é¢ˆçš„åœ°æ–¹ï¼Œå¦‚æœä½ è§‰å¾—é¡ºæ‰‹ï¼Œè¿™æ ·å†™å®Œå…¨æ²¡é—®é¢˜)</p>
<ol start="2">
<li>constuctor æ‰‹åŠ¨ bind å‹<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  constuctor(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="keyword">this</span>.handleClick = <span class="keyword">this</span>.handleClick.bind(<span class="keyword">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  handleClick () &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">xxx</span>: aaa &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;button onClick=&#123;<span class="keyword">this</span>.handleClick&#125;&gt;</span><br><span class="line">        Click me</span><br><span class="line">      &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>ä¼˜ç‚¹</strong>ï¼šç›¸æ¯”äºç¬¬ä¸€ç§æ€§èƒ½æ›´å¥½ï¼Œå› ä¸ºæ„é€ å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡ï¼Œé‚£ä¹ˆåªä¼š bind ä¸€æ¬¡ï¼Œè€Œä¸”å¦‚æœæœ‰å¤šä¸ªå…ƒç´ éƒ½éœ€è¦è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œä¹Ÿä¸éœ€è¦é‡å¤ bindï¼ŒåŸºæœ¬ä¸Šè§£å†³äº†ç¬¬ä¸€ç§çš„ä¸¤ä¸ªç¼ºç‚¹ã€‚<br><strong>ç¼ºç‚¹</strong>ï¼šæ²¡æœ‰æ˜æ˜¾ç¼ºç‚¹ï¼Œç¡¬è¦è¯´çš„è¯å°±æ˜¯å¤ªä¸‘äº†ï¼Œç„¶åä¸é¡ºæ‰‹ã€‚</p>
<ol start="3">
<li>ç®­å¤´å‡½æ•°å‹<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  handleClick () &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">xxx</span>: aaa &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;button onClick=&#123;(e) =&gt; <span class="keyword">this</span>.handleClick(e)&#125;&gt;</span><br><span class="line">        Click me</span><br><span class="line">      &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>ä¼˜ç‚¹</strong>ï¼šé¡ºæ‰‹ï¼Œå¥½çœ‹ã€‚<br><strong>ç¼ºç‚¹</strong>ï¼šæ¯æ¬¡ render éƒ½ä¼šé‡å¤åˆ›å»ºå‡½æ•°ï¼Œæ€§èƒ½ä¼šå·®ä¸€ç‚¹ã€‚</p>
<ol start="4">
<li>public class fields å‹<br>è¿™ç§ class fieldsè¿˜å¤„äºå®éªŒé˜¶æ®µï¼Œè²Œä¼¼ç›®å‰è¿˜æ²¡æœ‰è¢«çº³å…¥æ ‡å‡†<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  handleClick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">xxx</span>: aaa &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;button onClick=&#123;<span class="keyword">this</span>.handleClick&#125;&gt;</span><br><span class="line">        Click me</span><br><span class="line">      &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>ä¼˜ç‚¹</strong>ï¼šå¥½çœ‹ï¼Œæ€§èƒ½å¥½ã€‚<br><strong>ç¼ºç‚¹</strong>ï¼šæ²¡æœ‰æ˜æ˜¾ç¼ºç‚¹ï¼Œå¦‚æœç¡¬è¦è¯´å¯èƒ½å°±æ˜¯è¦å¤šè£…ä¸€ä¸ª babel æ’ä»¶æ¥æ”¯æŒè¿™ç§è¯­æ³•ã€‚</p>
<h4 id="ä¸ºä»€ä¹ˆè¦-setStateï¼Œè€Œä¸æ˜¯ç›´æ¥-this-state-xx-oo"><a href="#ä¸ºä»€ä¹ˆè¦-setStateï¼Œè€Œä¸æ˜¯ç›´æ¥-this-state-xx-oo" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ setStateï¼Œè€Œä¸æ˜¯ç›´æ¥ this.state.xx = oo"></a>ä¸ºä»€ä¹ˆè¦ <code>setState</code>ï¼Œè€Œä¸æ˜¯ç›´æ¥ <code>this.state.xx = oo</code></h4><p>å¦‚æœä» vue è½¬åˆ° React å¯èƒ½ä¼šæœ‰è¿™ç§ç–‘é—®ï¼Œå› ä¸º vue ä¿®æ”¹çŠ¶æ€éƒ½æ˜¯ç›´æ¥æ”¹çš„ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬äº†è§£ <code>setState</code>çš„åŸç†çš„è¯ï¼Œå¯èƒ½å°±èƒ½è§£ç­”è¿™ä¸ªé—®é¢˜äº†ï¼Œ<code>setState</code> åšçš„äº‹æƒ…ä¸ä»…ä»…åªæ˜¯ä¿®æ”¹äº† <code>this.state</code> çš„å€¼ï¼Œå¦å¤–æœ€é‡è¦çš„æ˜¯å®ƒä¼šè§¦å‘ React çš„æ›´æ–°æœºåˆ¶ï¼Œä¼šè¿›è¡Œ diff ï¼Œç„¶åå°† patch éƒ¨åˆ†æ›´æ–°åˆ°çœŸå® dom é‡Œã€‚</p>
<p>å¦‚æœä½ ç›´æ¥ <code>this.state.xx == oo</code> çš„è¯ï¼Œ<code>state</code> çš„å€¼ç¡®å®ä¼šæ”¹ï¼Œä½†æ˜¯æ”¹äº†ä¸ä¼šè§¦å‘ UI çš„æ›´æ–°ï¼Œé‚£å°±ä¸æ˜¯æ•°æ®é©±åŠ¨äº†ã€‚</p>
<p>é‚£ä¸ºä»€ä¹ˆ Vue ç›´æ¥ä¿®æ”¹ <code>data</code> å¯ä»¥è§¦å‘ UI çš„æ›´æ–°å‘¢ï¼Ÿå› ä¸º Vue åœ¨åˆ›å»º UI çš„æ—¶å€™ä¼šæŠŠè¿™äº› <code>data</code> ç»™æ”¶é›†èµ·æ¥ï¼Œå¹¶ä¸”åœ¨è¿™äº› <code>data</code> çš„è®¿é—®å™¨å±æ€§ <code>setter</code> è¿›è¡Œäº†é‡å†™ï¼Œåœ¨è¿™ä¸ªé‡å†™çš„æ–¹æ³•é‡Œä¼šå»è§¦å‘ UI çš„æ›´æ–°ã€‚</p>
<h4 id="setState-æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ç›¸å…³é—®é¢˜"><a href="#setState-æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ç›¸å…³é—®é¢˜" class="headerlink" title="setState æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ç›¸å…³é—®é¢˜"></a><code>setState</code> æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ç›¸å…³é—®é¢˜</h4><ol>
<li><p><code>setState</code> æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Ÿ<br>æˆ‘çš„å›ç­”æ˜¯æ‰§è¡Œè¿‡ç¨‹ä»£ç åŒæ­¥çš„ï¼Œåªæ˜¯åˆæˆäº‹ä»¶å’Œé’©å­å‡½æ•°çš„è°ƒç”¨é¡ºåºåœ¨æ›´æ–°ä¹‹å‰ï¼Œå¯¼è‡´åœ¨åˆæˆäº‹ä»¶å’Œé’©å­å‡½æ•°ä¸­æ²¡æ³•ç«‹é©¬æ‹¿åˆ°æ›´æ–°åçš„å€¼ï¼Œå½¢å¼äº†æ‰€è°“çš„â€œå¼‚æ­¥â€ï¼Œæ‰€ä»¥è¡¨ç°å‡ºæ¥æœ‰æ—¶æ˜¯åŒæ­¥ï¼Œæœ‰æ—¶æ˜¯â€œå¼‚æ­¥â€ã€‚</p>
</li>
<li><p>ä½•æ—¶æ˜¯åŒæ­¥ï¼Œä½•æ—¶æ˜¯å¼‚æ­¥å‘¢ï¼Ÿ<br>åªåœ¨åˆæˆäº‹ä»¶å’Œé’©å­å‡½æ•°ä¸­æ˜¯â€œå¼‚æ­¥â€çš„ï¼Œåœ¨åŸç”Ÿäº‹ä»¶å’Œ <code>setTimeout/setInterval</code> ç­‰åŸç”Ÿ API ä¸­éƒ½æ˜¯åŒæ­¥çš„ã€‚ç®€å•çš„å¯ä»¥ç†è§£ä¸ºè¢« React æ§åˆ¶çš„å‡½æ•°é‡Œé¢å°±ä¼šè¡¨ç°å‡ºâ€œå¼‚æ­¥â€ï¼Œåä¹‹è¡¨ç°ä¸ºåŒæ­¥ã€‚</p>
</li>
<li><p>é‚£ä¸ºä»€ä¹ˆä¼šå‡ºç°å¼‚æ­¥çš„æƒ…å†µå‘¢ï¼Ÿ<br>ä¸ºäº†åšæ€§èƒ½ä¼˜åŒ–ï¼Œå°† <code>state</code> çš„æ›´æ–°å»¶ç¼“åˆ°æœ€åæ‰¹é‡åˆå¹¶å†å»æ¸²æŸ“å¯¹äºåº”ç”¨çš„æ€§èƒ½ä¼˜åŒ–æ˜¯æœ‰æå¤§å¥½å¤„çš„ï¼Œå¦‚æœæ¯æ¬¡çš„çŠ¶æ€æ”¹å˜éƒ½å»é‡æ–°æ¸²æŸ“çœŸå® domï¼Œé‚£ä¹ˆå®ƒå°†å¸¦æ¥å·¨å¤§çš„æ€§èƒ½æ¶ˆè€—ã€‚</p>
</li>
<li><p>é‚£å¦‚ä½•åœ¨è¡¨ç°å‡ºå¼‚æ­¥çš„å‡½æ•°é‡Œå¯ä»¥å‡†ç¡®æ‹¿åˆ°æ›´æ–°åçš„ <code>state</code> å‘¢ï¼Ÿ<br>é€šè¿‡ç¬¬äºŒä¸ªå‚æ•° <code>setState(partialState, callback)</code> ä¸­çš„ <code>callback</code> æ‹¿åˆ°æ›´æ–°åçš„ç»“æœã€‚<br>æˆ–è€…å¯ä»¥é€šè¿‡ç»™ <code>setState</code> ä¼ é€’å‡½æ•°æ¥è¡¨ç°å‡ºåŒæ­¥çš„æƒ…å†µï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.setState(<span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">val</span>: newVal &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li><p>é‚£è¡¨ç°å‡ºå¼‚æ­¥çš„åŸç†æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ<br>åœ¨ React çš„ <code>setState</code> å‡½æ•°å®ç°ä¸­ï¼Œä¼šæ ¹æ® <code>isBatchingUpdates</code>(é»˜è®¤æ˜¯ false) å˜é‡åˆ¤æ–­æ˜¯å¦ç›´æ¥æ›´æ–° <code>this.state</code> è¿˜æ˜¯æ”¾åˆ°é˜Ÿåˆ—ä¸­ç¨åæ›´æ–°ã€‚ç„¶åæœ‰ä¸€ä¸ª <code>batchedUpdate</code> å‡½æ•°ï¼Œå¯ä»¥ä¿®æ”¹ <code>isBatchingUpdates</code> ä¸º <code>trueï¼Œå½“</code> React è°ƒç”¨äº‹ä»¶å¤„ç†å‡½æ•°ä¹‹å‰ï¼Œæˆ–è€…ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¹‹å‰å°±ä¼šè°ƒç”¨ <code>batchedUpdate</code> å‡½æ•°ï¼Œè¿™æ ·çš„è¯ï¼Œ<code>setState</code> å°±ä¸ä¼šåŒæ­¥æ›´æ–° <code>this.state</code>ï¼Œè€Œæ˜¯æ”¾åˆ°æ›´æ–°é˜Ÿåˆ—é‡Œé¢åç»­æ›´æ–°ã€‚<br>è¿™æ ·ä½ å°±å¯ä»¥ç†è§£ä¸ºä»€ä¹ˆåŸç”Ÿäº‹ä»¶å’Œ <code>setTimeout/setinterval</code> é‡Œé¢è°ƒç”¨ <code>this.state</code> ä¼šåŒæ­¥æ›´æ–°äº†å§ï¼Œå› ä¸ºé€šè¿‡è¿™äº›å‡½æ•°è°ƒç”¨çš„ React æ²¡åŠæ³•å»è°ƒç”¨ <code>batchedUpdate</code> å‡½æ•°å°† <code>isBatchingUpdates</code> è®¾ç½®ä¸º <code>true</code>ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ <code>setState</code> çš„æ—¶å€™é»˜è®¤å°±æ˜¯ <code>false</code>ï¼Œé‚£ä¹ˆå°±ä¼šåŒæ­¥æ›´æ–°ã€‚</p>
</li>
</ol>
<p>æœ€å<br><code>setState</code> æ˜¯ React éå¸¸é‡è¦çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå€¼å¾—å¤§å®¶å¥½å¥½å»ç ”ç©¶ä¸€ä¸‹ä»–çš„åŸç†ã€‚</p>
<p>å‚è€ƒæ–‡ç« </p>
<p>React ä¸­ä¸ºä»€ä¹ˆè¦ bind this<br>ã€ŠReact çŠ¶æ€ç®¡ç†ä¸åŒæ„å®è·µã€‹</p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2019/12/18/json/" rel="prev" title="é€šè¿‡éœ€æ±‚å­¦ä¹ JSON.stringify()">
      <i class="fa fa-chevron-left"></i> é€šè¿‡éœ€æ±‚å­¦ä¹ JSON.stringify()
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/02/09/about-docker/" rel="next" title="å‰ç«¯é¢†åŸŸçš„ Docker">
      å‰ç«¯é¢†åŸŸçš„ Docker <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸ºä»€ä¹ˆè¦å¼•å…¥-React"><span class="nav-number">1.</span> <span class="nav-text">ä¸ºä»€ä¹ˆè¦å¼•å…¥ React</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸ºä»€ä¹ˆè¦ç”¨-className-è€Œä¸ç”¨-class"><span class="nav-number">2.</span> <span class="nav-text">ä¸ºä»€ä¹ˆè¦ç”¨ className è€Œä¸ç”¨ class</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸ºä»€ä¹ˆå±æ€§è¦ç”¨å°é©¼å³°"><span class="nav-number">3.</span> <span class="nav-text">ä¸ºä»€ä¹ˆå±æ€§è¦ç”¨å°é©¼å³°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸ºä»€ä¹ˆ-constructor-é‡Œè¦è°ƒç”¨-super-å’Œä¼ é€’-props"><span class="nav-number">4.</span> <span class="nav-text">ä¸ºä»€ä¹ˆ constructor é‡Œè¦è°ƒç”¨ super å’Œä¼ é€’ props</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#ä¸ºä»€ä¹ˆè¦è°ƒç”¨-super"><span class="nav-number">4.1.</span> <span class="nav-text">ä¸ºä»€ä¹ˆè¦è°ƒç”¨ super</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ä¸ºä»€ä¹ˆè¦ä¼ é€’-props"><span class="nav-number">4.2.</span> <span class="nav-text">ä¸ºä»€ä¹ˆè¦ä¼ é€’ props&#96;</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸ºä»€ä¹ˆç»„ä»¶ç”¨å¤§å†™å¼€å¤´"><span class="nav-number">5.</span> <span class="nav-text">ä¸ºä»€ä¹ˆç»„ä»¶ç”¨å¤§å†™å¼€å¤´</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸ºä»€ä¹ˆè°ƒç”¨æ–¹æ³•è¦-bind-this"><span class="nav-number">6.</span> <span class="nav-text">ä¸ºä»€ä¹ˆè°ƒç”¨æ–¹æ³•è¦ bind this</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#React-æ˜¯å¦‚ä½•å¤„ç†äº‹ä»¶çš„ï¼Ÿ"><span class="nav-number">6.1.</span> <span class="nav-text">React æ˜¯å¦‚ä½•å¤„ç†äº‹ä»¶çš„ï¼Ÿ</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#this-ç®€å•å›é¡¾"><span class="nav-number">6.2.</span> <span class="nav-text">this ç®€å•å›é¡¾</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#å››ç§äº‹ä»¶å¤„ç†å¯¹æ¯”"><span class="nav-number">6.3.</span> <span class="nav-text">å››ç§äº‹ä»¶å¤„ç†å¯¹æ¯”</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸ºä»€ä¹ˆè¦-setStateï¼Œè€Œä¸æ˜¯ç›´æ¥-this-state-xx-oo"><span class="nav-number">7.</span> <span class="nav-text">ä¸ºä»€ä¹ˆè¦ setStateï¼Œè€Œä¸æ˜¯ç›´æ¥ this.state.xx &#x3D; oo</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#setState-æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ç›¸å…³é—®é¢˜"><span class="nav-number">8.</span> <span class="nav-text">setState æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ç›¸å…³é—®é¢˜</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="å®‹ç§‹æ™“"
      src="/images/head.png">
  <p class="site-author-name" itemprop="name">å®‹ç§‹æ™“</p>
  <div class="site-description" itemprop="description">å­¦ä¹ æ€»ç»“ æ€è€ƒæ„Ÿæ‚Ÿ çŸ¥è¯†ç®¡ç†</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">16</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">æ ‡ç­¾</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">å®‹ç§‹æ™“</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ v4.1.1
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">ä¸»é¢˜ â€“ <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.6.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
