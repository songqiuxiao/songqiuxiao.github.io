<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"songqiuxiao.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="å‰å‡ å¤©åœ¨é¢è¯•çš„æ—¶å€™ï¼Œå’Œä¸€ä¸ªå€™é€‰äººèŠåˆ°äº†ç”Ÿæˆæµ·æŠ¥çš„ä¸€äº›æ–¹æ¡ˆã€‚æƒ³åˆ°æˆ‘ä»¬çš„ä¸šåŠ¡é‡Œä¹Ÿæœ‰ç±»ä¼¼çš„åœºæ™¯ï¼Œå°±æƒ³æ¥çœ‹çœ‹è¿™ç§æŠŠ dom ç”Ÿæˆå›¾ç‰‡éƒ½æœ‰å“ªäº›ä¸ªæ–¹æ¡ˆï¼Œä¼˜ç¼ºç‚¹éƒ½æ˜¯å•¥ã€‚èƒ½ä¸èƒ½è‡ªå·±å®ç°ä¸€ä¸ªç®€å•çš„æ–¹æ¡ˆï¼Œæ¯•ç«Ÿå¼•å…¥ä¸‰æ–¹åº“å¯èƒ½ä¼šå¤šä¸€äº›å¯èƒ½ä¼šæ— ç”¨çš„ä»£ç ï¼Œè‡ªå·±é€ è½®å­æ‰æ˜¯æœ€ç²¾å‡†è§£å†³éœ€æ±‚çš„ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="å‰ç«¯ç”Ÿæˆå›¾ç‰‡">
<meta property="og:url" content="https:&#x2F;&#x2F;songqiuxiao.github.io&#x2F;2021&#x2F;04&#x2F;25&#x2F;html-to-img&#x2F;index.html">
<meta property="og:site_name" content="å®‹ç§‹æ™“">
<meta property="og:description" content="å‰å‡ å¤©åœ¨é¢è¯•çš„æ—¶å€™ï¼Œå’Œä¸€ä¸ªå€™é€‰äººèŠåˆ°äº†ç”Ÿæˆæµ·æŠ¥çš„ä¸€äº›æ–¹æ¡ˆã€‚æƒ³åˆ°æˆ‘ä»¬çš„ä¸šåŠ¡é‡Œä¹Ÿæœ‰ç±»ä¼¼çš„åœºæ™¯ï¼Œå°±æƒ³æ¥çœ‹çœ‹è¿™ç§æŠŠ dom ç”Ÿæˆå›¾ç‰‡éƒ½æœ‰å“ªäº›ä¸ªæ–¹æ¡ˆï¼Œä¼˜ç¼ºç‚¹éƒ½æ˜¯å•¥ã€‚èƒ½ä¸èƒ½è‡ªå·±å®ç°ä¸€ä¸ªç®€å•çš„æ–¹æ¡ˆï¼Œæ¯•ç«Ÿå¼•å…¥ä¸‰æ–¹åº“å¯èƒ½ä¼šå¤šä¸€äº›å¯èƒ½ä¼šæ— ç”¨çš„ä»£ç ï¼Œè‡ªå·±é€ è½®å­æ‰æ˜¯æœ€ç²¾å‡†è§£å†³éœ€æ±‚çš„ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https:&#x2F;&#x2F;songqiuxiao.github.io&#x2F;2021&#x2F;04&#x2F;25&#x2F;html-to-img&#x2F;1.jpg">
<meta property="og:image" content="https:&#x2F;&#x2F;songqiuxiao.github.io&#x2F;2021&#x2F;04&#x2F;25&#x2F;html-to-img&#x2F;2.jpg">
<meta property="og:image" content="https:&#x2F;&#x2F;songqiuxiao.github.io&#x2F;2021&#x2F;04&#x2F;25&#x2F;html-to-img&#x2F;3.jpg">
<meta property="og:image" content="https:&#x2F;&#x2F;songqiuxiao.github.io&#x2F;2021&#x2F;04&#x2F;25&#x2F;html-to-img&#x2F;6.jpg">
<meta property="og:image" content="https:&#x2F;&#x2F;songqiuxiao.github.io&#x2F;2021&#x2F;04&#x2F;25&#x2F;html-to-img&#x2F;4.png">
<meta property="og:image" content="https:&#x2F;&#x2F;songqiuxiao.github.io&#x2F;2021&#x2F;04&#x2F;25&#x2F;html-to-img&#x2F;5.jpg">
<meta property="og:image" content="https:&#x2F;&#x2F;songqiuxiao.github.io&#x2F;2021&#x2F;04&#x2F;25&#x2F;html-to-img&#x2F;7.jpg">
<meta property="og:image" content="https:&#x2F;&#x2F;songqiuxiao.github.io&#x2F;2021&#x2F;04&#x2F;25&#x2F;html-to-img&#x2F;8.jpg">
<meta property="og:image" content="https:&#x2F;&#x2F;songqiuxiao.github.io&#x2F;2021&#x2F;04&#x2F;25&#x2F;html-to-img&#x2F;9.jpg">
<meta property="og:image" content="https:&#x2F;&#x2F;songqiuxiao.github.io&#x2F;2021&#x2F;04&#x2F;25&#x2F;html-to-img&#x2F;10.jpg">
<meta property="og:image" content="https:&#x2F;&#x2F;songqiuxiao.github.io&#x2F;2021&#x2F;04&#x2F;25&#x2F;html-to-img&#x2F;11.jpg">
<meta property="article:published_time" content="2021-04-25T03:33:55.000Z">
<meta property="article:modified_time" content="2021-04-26T09:40:58.482Z">
<meta property="article:author" content="å®‹ç§‹æ™“">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;songqiuxiao.github.io&#x2F;2021&#x2F;04&#x2F;25&#x2F;html-to-img&#x2F;1.jpg">

<link rel="canonical" href="https://songqiuxiao.github.io/2021/04/25/html-to-img/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>å‰ç«¯ç”Ÿæˆå›¾ç‰‡ | å®‹ç§‹æ™“</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">å®‹ç§‹æ™“</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">You are the JavaScript in my HTML</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://songqiuxiao.github.io/2021/04/25/html-to-img/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.png">
      <meta itemprop="name" content="å®‹ç§‹æ™“">
      <meta itemprop="description" content="æœˆäº®æ˜¯æˆ‘æŠ›çš„ç¡¬å¸ğŸŒ™ ä¸¤è¾¹éƒ½æ˜¯æ¢¦è§ä½ ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å®‹ç§‹æ™“">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          å‰ç«¯ç”Ÿæˆå›¾ç‰‡
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-04-25 11:33:55" itemprop="dateCreated datePublished" datetime="2021-04-25T11:33:55+08:00">2021-04-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-04-26 17:40:58" itemprop="dateModified" datetime="2021-04-26T17:40:58+08:00">2021-04-26</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>å‰å‡ å¤©åœ¨é¢è¯•çš„æ—¶å€™ï¼Œå’Œä¸€ä¸ªå€™é€‰äººèŠåˆ°äº†ç”Ÿæˆæµ·æŠ¥çš„ä¸€äº›æ–¹æ¡ˆã€‚æƒ³åˆ°æˆ‘ä»¬çš„ä¸šåŠ¡é‡Œä¹Ÿæœ‰ç±»ä¼¼çš„åœºæ™¯ï¼Œå°±æƒ³æ¥çœ‹çœ‹è¿™ç§æŠŠ dom ç”Ÿæˆå›¾ç‰‡éƒ½æœ‰å“ªäº›ä¸ªæ–¹æ¡ˆï¼Œä¼˜ç¼ºç‚¹éƒ½æ˜¯å•¥ã€‚èƒ½ä¸èƒ½è‡ªå·±å®ç°ä¸€ä¸ªç®€å•çš„æ–¹æ¡ˆï¼Œæ¯•ç«Ÿå¼•å…¥ä¸‰æ–¹åº“å¯èƒ½ä¼šå¤šä¸€äº›å¯èƒ½ä¼šæ— ç”¨çš„ä»£ç ï¼Œè‡ªå·±é€ è½®å­æ‰æ˜¯æœ€ç²¾å‡†è§£å†³éœ€æ±‚çš„ã€‚</p>
<a id="more"></a>

<h1 id="html2canvas"><a href="#html2canvas" class="headerlink" title="html2canvas"></a>html2canvas</h1><p>é¦–å…ˆæ˜¯ <a href="https://github.com/niklasvh/html2canvas" target="_blank" rel="noopener"><code>html2canvas</code></a>ï¼Œæˆ‘ä»¬é¡¹ç›®é‡Œæ˜¯æœ‰ç”¨è¿‡è¿™ä¸ªçš„ï¼Œå…·ä½“å¯ä»¥ç‚¹å‡»<a href="https://html2canvas.hertzen.com/" target="_blank" rel="noopener">è¿™é‡Œ</a>æ¥ä½“éªŒã€‚<br><strong>ğŸ‘ğŸ» å®ƒçš„ä¼˜ç‚¹æ˜¯ï¼š</strong></p>
<ol>
<li>å…¼å®¹æ€§å¥½ï¼Œè¿™æ˜¯å®˜ç½‘ç»™å‡ºçš„ supported<br><img src="/2021/04/25/html-to-img/1.jpg" alt="img"></li>
<li>star å¤šã€ä¸”ä¸€ç›´æœ‰äººåœ¨ç»´æŠ¤<br><img src="/2021/04/25/html-to-img/2.jpg" alt="img"></li>
</ol>
<p><strong>ğŸ‘ğŸ» ç¼ºç‚¹æ˜¯ï¼š</strong></p>
<ol>
<li>ç”Ÿæˆçš„å›¾ç‰‡æ ·å¼åŸºæœ¬ä¸Šæ— æ³•è°ƒæ•´ï¼Œæœ‰ç‚¹ç±»ä¼¼æˆªå±ï¼Œä¸èƒ½æ·»åŠ ä¸€äº›é¢å¤–çš„æ ·å¼è¿›å»ï¼Œæ¯”å¦‚è¾¹æ¡†ç­‰ã€‚<br>å…·ä½“å¯ä»¥å‚è€ƒå®˜æ–¹ç»™å‡ºçš„<a href="https://html2canvas.hertzen.com/features" target="_blank" rel="noopener">feature æ–‡æ¡£</a>ã€‚<br><img src="/2021/04/25/html-to-img/3.jpg" alt="img"></li>
<li>æ²¡åŠæ³•æ¸²æŸ“è·¨åŸŸèµ„æº</li>
</ol>
<h1 id="dom-to-img"><a href="#dom-to-img" class="headerlink" title="dom-to-img"></a>dom-to-img</h1><p>å†æœæœçœ‹çš„è¯ï¼Œè¿˜æœ‰<a href="https://github.com/tsayen/dom-to-image" target="_blank" rel="noopener"><code>dom-to-img</code></a>ï¼Œå®ƒçš„ star æ•°ä¼šç¨å¾®å°‘ä¸€äº›ã€‚<br><strong>ğŸ‘ğŸ» ä¼˜ç‚¹æ˜¯ï¼š</strong></p>
<ol>
<li>æ”¯æŒç”Ÿæˆå¤šç§å›¾ç‰‡æ ¼å¼ï¼Œpngã€base64ã€SVG ç­‰æ ¼å¼</li>
<li>æ”¯æŒå¾ˆå¤šæ ·å¼ï¼Œæ–¹ä¾¿é«˜è¿˜åŸè®¾è®¡ç¨¿çš„ä¸€äº›ç»†èŠ‚<br><img src="/2021/04/25/html-to-img/6.jpg" alt="img"></li>
</ol>
<p><strong>ğŸ‘ğŸ» ç¼ºç‚¹æ˜¯ï¼š</strong></p>
<ol>
<li>å…¼å®¹æ€§è¾ƒå·®ã€åªåœ¨é«˜ç‰ˆæœ¬æµè§ˆå™¨é‡Œæ”¯æŒã€‚<br>ä¸»è¦æ˜¯ç”±äº <code>&lt;foreignObject&gt;</code> æ”¯æŒåº¦çš„é—®é¢˜ã€‚æ„Ÿè§‰ä½œè€…ä¹Ÿå¹¶æ²¡æœ‰æ‰“ç®—ä¼˜åŒ–è¿™ä¸€ç‚¹çš„æ„æ€ã€‚<br><img src="/2021/04/25/html-to-img/4.png" alt="img"></li>
<li>ç»´æŠ¤çš„é¢‘ç‡å·²ç»å¾ˆä½äº†<br><img src="/2021/04/25/html-to-img/5.jpg" alt="img"></li>
<li>ç¿»çœ‹ issue çš„è¯ï¼Œä¼šæœ‰æåˆ°æŸäº›æœºå‹ä¸æ”¯æŒçš„æƒ…å†µã€‚<small>ï¼ˆæˆ‘è¿™è¾¹å°±æ²¡åšå…·ä½“æµ‹è¯•ï¼Œå¯ä»¥æ ¹æ® issue æ¥è§£å†³ï¼‰</small></li>
<li>æ²¡åŠæ³•æ¸²æŸ“è·¨åŸŸèµ„æº</li>
</ol>
<h1 id="puppeteer-screenshot"><a href="#puppeteer-screenshot" class="headerlink" title="puppeteer - screenshot"></a>puppeteer - screenshot</h1><p><a href="https://github.com/puppeteer/puppeteer" target="_blank" rel="noopener">puppeteer</a>ä¹Ÿæ˜¯æˆ‘ä»¬é¡¹ç›®é‡Œç”¨åˆ°çš„ã€‚å®ƒä¸åªæ˜¯ä¸€ä¸ªæŠŠ html è½¬æˆå›¾ç‰‡çš„å·¥å…·ï¼Œå®ƒæ˜¯ Chrome å¼€å‘å›¢é˜Ÿåœ¨ 2017 å¹´å‘å¸ƒçš„ä¸€ä¸ª Node.js çš„åŒ…ï¼Œå¯ä»¥ç”¨æ¥æ¨¡æ‹Ÿ Chrome æµè§ˆå™¨çš„è¿è¡Œç¯å¢ƒã€‚</p>
<blockquote>
<p>Puppeteer is a Node library which provides a high-level API to control Chrome or Chromium over the DevTools Protocol. Puppeteer runs headless by default, but can be configured to run full (non-headless) Chrome or Chromium.</p>
</blockquote>
<p><img src="/2021/04/25/html-to-img/7.jpg" alt="img"></p>
<p>æ—¢ç„¶æ˜¯åœ¨æ¨¡æ‹Ÿ Chrome æµè§ˆå™¨çš„è¿è¡Œç¯å¢ƒï¼Œé‚£ä¹ˆå½“ç„¶èƒ½ç”¨å®ƒæä¾›çš„æ‰“å¼€é¡µé¢ url + æˆªå›¾çš„æ–¹å¼ï¼Œè¿™é‡Œç»™å‡ºç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> puppeteer = <span class="built_in">require</span>(<span class="string">"puppeteer"</span>);</span><br><span class="line"><span class="comment">// steam å¯åŠ¨ï¼ï¼ˆä¸æ˜¯</span></span><br><span class="line"><span class="keyword">let</span> browser = puppeteer.launch(option); <span class="comment">// option å†…æœ‰ä¸€äº›æµè§ˆå™¨çš„é…ç½®å‚æ•°</span></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªtabé¡µé¢</span></span><br><span class="line"><span class="keyword">const</span> page = browser.newPage();</span><br><span class="line"><span class="comment">// æ¨¡æ‹Ÿ iPhone X è®¾å¤‡</span></span><br><span class="line">page.emulate(devices[<span class="string">"iPhone X"</span>]);</span><br><span class="line"><span class="comment">// æ‰“å¼€ä½ éœ€è¦æˆªå±çš„é“¾æ¥</span></span><br><span class="line">page.goto(url);</span><br><span class="line"><span class="comment">// é¡µé¢å›ä¼ ä¿¡æ¯</span></span><br><span class="line">page.evaluate(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// åœ¨è¿™é‡Œä½ å¯ä»¥æ¨¡æ‹Ÿæ“ä½œ dom</span></span><br><span class="line">  <span class="comment">// æ¯”å¦‚é€‰ä¸­ä»€ä¹ˆå…ƒç´ åŠ ç‚¹è¾¹æ¡†ã€èƒŒæ™¯è‰²å•¥çš„</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//å¡ç‚¹æ ·å¼</span></span><br><span class="line">page.addStyleTag(options);</span><br><span class="line"><span class="comment">// æˆªä¸ªå±</span></span><br><span class="line"><span class="keyword">const</span> file = page.screenshot(&#123;</span><br><span class="line">  type: <span class="string">"jpeg"</span>,</span><br><span class="line">  quality: <span class="number">1000</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// åˆ«å¿˜äº†å…³æ‰é¡µé¢</span></span><br><span class="line">page.close();</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ puppeteer è¿˜æ”¯æŒå…¶ä»– api ä½¿ç”¨ï¼Œè¿™ä¸€å°±ä¸ä¸€ä¸€åˆ—ä¸¾ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å»<a href="https://github.com/puppeteer/puppeteer/blob/v9.0.0/docs/api.md" target="_blank" rel="noopener">ä»“åº“</a>é‡Œçœ‹ä¸€ä¸‹ã€‚<br>ä»‹ç»å®Œä½¿ç”¨æ–¹æ³•ï¼Œè¿˜æ˜¯è¦æ€»ç»“ä¸‹ä¼˜ç¼ºç‚¹çš„ã€‚<br><strong>ğŸ‘ğŸ» ä¼˜ç‚¹æ˜¯ï¼š</strong></p>
<p>ä¾æ‰˜äº chrome ç¯å¢ƒï¼Œä½ èƒ½æƒ³åˆ°çš„ã€æµè§ˆå™¨æ”¯æŒçš„ã€å‡ ä¹ä»»ä½•æ“ä½œéƒ½èƒ½å®ç°ã€‚</p>
<ol>
<li>å…¼å®¹æ€§å¥½</li>
<li>æ”¯æŒå„ç§ç”Ÿæˆæ–¹å¼ï¼Œå›¾ç‰‡ã€pdfã€ä»»ä½•å½¢å¼</li>
<li>å…è®¸æ“ä½œ domï¼Œå¯ä»¥ä»»æ€§ä¿®æ”¹å…·ä½“çš„å±•ç¤ºï¼Œæƒ³æ”¹ç‚¹æ ·å¼ï¼Œæƒ³æ”¹ä¸‹æ’ç‰ˆã€‚é€šé€š OKï¼æ»¡è¶³è®¾è®¡å¸ˆå’Œäº§å“çš„æ‰€æœ‰ä»»æ€§è¦æ±‚</li>
</ol>
<p><strong>ğŸ‘ğŸ» ç¼ºç‚¹æ˜¯ï¼š</strong></p>
<ol>
<li>å¤§ã€‚æˆ‘è¯•äº†ä¸‹ï¼Œå¤§æ¦‚ 112.4 Mb ï¼Œå‹ç¼©ä¹‹åå¯èƒ½ä¼šå°ä¸€äº›ï¼Œä½†ä¼°è®¡æ²¡ä»€ä¹ˆé¡¹ç›®ä¼šå…è®¸ä½ å› ä¸ºä¸€ä¸ª html è½¬å›¾ç‰‡åŠŸèƒ½ï¼Œè®©ä½ è£…è¿™ä¹ˆå¤§çš„ä¸€ä¸ªåº“<br><img src="/2021/04/25/html-to-img/8.jpg" alt="img"></li>
<li>ä½¿ç”¨å¤æ‚ã€‚<br>éœ€è¦å…ˆçœ‹æ˜ç™½ puppeteer çš„ä½œç”¨ã€‚æ€é¸¡ç”¨ç‰›åˆ€çš„æ„Ÿè§‰ï¼Œæ¯”å¦‚çœ‹ demoï¼Œè¿›è¡Œäº†å¾ˆå¤šæ“ä½œï¼Œæœ€åæ‰æ˜¯ï¼š<code>page.screenshot</code></li>
</ol>
<h1 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h1><p>çœ‹äº†è¿™ä¹ˆå¤šï¼Œå„ç§ä¼˜ç¼ºç‚¹ä¹Ÿéƒ½åˆ†æåˆ°ä½äº†ï¼Œé‚£ä¹ˆå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬èƒ½ä¸èƒ½è‡ªå·±å»å®ç°ä¸€ä¸ªç±»ä¼¼çš„ä¸œè¥¿ã€‚æ¯•ç«Ÿä¸‰æ–¹åº“é‡Œå¯èƒ½ä¼šæä¾›å¾ˆå¤šæ— ç”¨å·¥å…·ï¼Œè‡ªå·±å†™çš„è¯ï¼Œå¯ä»¥ç²¾ç®€å¾ˆå¤šå†…å®¹ï¼ˆemmâ€¦ï¼‰ã€‚<br>åˆ¨é™¤å» puppeteer çš„å®ç°ï¼Œç®€å•çœ‹äº†ä¸‹å¦å¤–ä¸¤ä¸ªåº“çš„æºç ï¼Œå…¶å®ä¹Ÿå°±æ˜¯ canvas å’Œ svg ä¸¤ç§å®ç°æ–¹æ¡ˆï¼ŒåŸç†å¤§æ¦‚æ˜¯å·®ä¸å¤šçš„ï¼Œå°±æ˜¯æŠŠ dom è½¬æˆå›¾ç‰‡ï¼Œä¸è¿‡å®ç°ä¸Šæ˜¯å®Œå…¨ä¸ä¸€æ ·çš„ï¼Œä¸‹é¢å°±åˆ†å¼€æ¥è¯´ã€‚</p>
<h2 id="canvas-æ–¹æ¡ˆ"><a href="#canvas-æ–¹æ¡ˆ" class="headerlink" title="canvas æ–¹æ¡ˆ"></a>canvas æ–¹æ¡ˆ</h2><p>å—¯ï¼Œæ€ä¹ˆæŠŠ dom æ”¾åˆ° canvas é‡Œå‘¢ï¼Ÿè‚¯å®šæ˜¯è¦ä¸€ç‚¹ç‚¹ç”»åˆ°ç”»å¸ƒä¸Šçš„ï¼Œå…‰æƒ³ä¸€æƒ³å°±è§‰å¾—æŒºéº»çƒ¦çš„ï¼Œ<small><del>æ­¤æ—¶æƒ³èµ·äº†æˆ‘ä¸Šå¤§å­¦çš„è¯¾è®¾ï¼Œcanvas ç”»å°é£æœº= =</del></small><br>å¤§è‡´çš„æ€è·¯å°±æ˜¯ï¼š</p>
<ol>
<li>é€’å½’å‡ºéœ€è¦è½¬æˆå›¾ç‰‡çš„æ‰€æœ‰ dom èŠ‚ç‚¹ï¼Œç„¶åæ”¾åˆ°ç›¸åº”çš„ <code>renderList</code>ï¼Œdom é‡Œæ”¾ä¸€äº›ç±»ä¼¼ <code>isRoot</code>ã€<code>style</code>ã€<code>nodeType</code> ç­‰ä¸€ç³»åˆ—éœ€è¦ç”¨åˆ°çš„ç»˜åˆ¶ä¿¡æ¯</li>
<li>æ ¹æ®è®°å½•çš„ <code>position</code>ã€<code>z-index</code>ã€<code>float</code> ç­‰èƒ½è„±ç¦»æ–‡æ¡£æµçš„ css å±æ€§ï¼ŒæŠŠåˆšåˆšçš„ <code>renderList</code>ï¼Œæ ¹æ®å‰é¢çš„å±‚çº§ä¿¡æ¯ï¼Œç”Ÿæˆä¸€ä¸ª <code>renderOrderList</code></li>
<li>éå† <code>renderOrderList</code>ï¼ŒæŠŠ css æ ·å¼è½¬æ¢æˆ <code>setFillStyle</code> å¯è¯†åˆ«çš„å‚æ•°ï¼Œæ ¹æ® <code>nodeType</code> è°ƒç”¨ç›¸å¯¹åº” canvas æ–¹æ³•ï¼Œå¦‚æ–‡æœ¬åˆ™è°ƒç”¨ <code>fillText</code>ï¼Œå›¾ç‰‡ <code>drawImage</code>ï¼Œè®¾ç½®èƒŒæ™¯è‰²çš„ div è°ƒç”¨ <code>fillRect</code> ç­‰ã€‚canvas å…·ä½“çš„ api å¯ä»¥å‚è€ƒ<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API" target="_blank" rel="noopener">è¿™é‡Œ</a></li>
<li>åˆ›å»ºä¸€ä¸ªç”»å¸ƒï¼Œæ ¹æ®åˆšåˆšè½¬æ¢å¥½çš„ <code>renderOrderList</code> ç”»å›¾</li>
</ol>
<p>çœ‹ç€è¿™å‡ ä¸ªæ•´ä½“æ€è·¯ï¼Œæ— ç–‘ç¬¬ 2ã€3 æ­¥ä¼šæ˜¯éå¸¸éº»çƒ¦çš„å·¥ä½œï¼Œå°¤å…¶åœ¨å®é™…ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œdom çš„æ’ç‰ˆä¼šéå¸¸éå¸¸çš„å¤æ‚ï¼Œhtml2canvas çš„å¤§éƒ¨åˆ†é€»è¾‘å…¶å®ä¹Ÿæ˜¯åœ¨åšè¿™ä¸ªäº‹æƒ…ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘è¯´å®ƒçµæ´»æ€§ä¸å¤Ÿçš„åŸå› ï¼Œcanvas çš„æ ·å¼ä¸åƒ css é‚£ä¹ˆçµæ´»ï¼Œä½ æƒ³åŠ çš„æ ·å¼ï¼Œå¹¶ä¸ä¸€å®šèƒ½å¤Ÿæ”¯æŒï¼›ä½†æ˜¯ç”¨ canvas çš„å…¼å®¹æ€§åˆè¶³å¤Ÿå¥½ï¼Œåªè¦ä¿è¯æµè§ˆå™¨æ”¯æŒ canvas å°±è¡Œï¼›ç”±äºå®é™…åœºæ™¯ä¸‹ dom çš„å¤æ‚åº¦ï¼Œè€Œæ•´ä½“é€»è¾‘åˆä½¿ç”¨äº†é€’å½’ï¼Œä½ æ‡‚çš„ï¼Œé•¿é¡µé¢å‡ åƒä¸ª node èŠ‚ç‚¹æ ¹æœ¬æ‹¦ä¸ä½ï¼Œæ‰€ä»¥æ€§èƒ½å¾ˆå®¹æ˜“è·Ÿä¸ä¸Šï¼Œhtml2canvas å†…ä½¿ç”¨äº†å¤§é‡çš„ Promise æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæå‡äº†ç»˜åˆ¶é€Ÿåº¦ã€‚</p>
<p>å¦å¤–ç›¸æ¯”äº cssï¼Œcanvas å¯¹æ–‡å­—æ’ç‰ˆçš„æ”¯æŒå¾ˆå¼±ï¼Œåœ¨ css ä¸­å¤©ç„¶æ”¯æŒçš„æ–‡æœ¬è‡ªåŠ¨æ¢è¡Œï¼Œå…¶ä»– <code>letter-spacing</code> å­—é—´è·ï¼Œ<code>writing-mode</code> ç«–æ’ç­‰éƒ½æ˜¯ä¸€ä¸ª css å±æ€§å°±å¯ä»¥å®ç°ã€‚ä½†æ˜¯åœ¨ canvas ä¸­ï¼Œå…¨éƒ¨éƒ½ä¸æ”¯æŒã€‚è¦å®ç°è¿™ç§æ¢è¡Œæ•ˆæœï¼Œå°±åªèƒ½å¯¹ç€æ–‡æœ¬å»é€ä¸ªè®¡ç®—ï¼Œç„¶åä¸€è¡Œä¸€è¡Œç”šè‡³ä¸€ä¸ªå­—ä¸€ä¸ªå­—æ¸²æŸ“ã€‚ã€‚ã€‚ã€‚ã€‚</p>
<p>ä¸è¿‡å°½ç®¡ html2canvas ä¸»é¡µè¡¨ç¤ºå®ƒè¿˜å¤„äºå®éªŒå®¤ç¯å¢ƒï¼Œä¸æ¨èå¤§å®¶åœ¨ç”Ÿäº§ä½¿ç”¨ï¼Œä½†è‡ª 14 å¹´èµ·ä¾¿å·²ç»è¢« Twitter ç­‰ç”¨åœ¨äº†ç”Ÿäº§ç¯å¢ƒï¼Œæ‰€ä»¥è™½ç„¶æœ‰è¯¸å¤šé™åˆ¶ï¼Œç¨³å®šæ€§åº”è¯¥è¿˜æ˜¯ä¿éšœçš„ã€‚<br><img src="/2021/04/25/html-to-img/9.jpg" alt="img"><br>canvas çš„æ–¹æ¡ˆçœ‹èµ·æ¥å¦‚æ­¤å¤æ‚ï¼Œæ ¹æœ¬ä¸æƒ³è‡ªå·±æ‰‹æ’¸ä¸€å¥—å•Šå–‚ï¼é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•å‘¢ï¼Ÿé“›é“›é“›é“›~~é‚£å°±æ˜¯ svg å•¦</p>
<h2 id="svg-æ–¹æ¡ˆ"><a href="#svg-æ–¹æ¡ˆ" class="headerlink" title="svg æ–¹æ¡ˆ"></a>svg æ–¹æ¡ˆ</h2><p>é¦–å…ˆ svg æ˜¯çŸ¢é‡å›¾ï¼Œå¹¶ä¸”å¤§å®¶ä¹Ÿéƒ½çŸ¥é“ï¼Œå®ƒæ˜¯å¯ä»¥ç”¨ xml æ¥æè¿°çš„ã€‚</p>
<p>æ¯”å¦‚è¯´ä¸‹é¢è¿™ä¸ªå¯çˆ±çš„èƒ¡èåŒ—~å°±æ˜¯ç”¨ svg ç”»çš„<br><svg t="1619407493821" class="icon" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16419" width="200" height="200"><path d="M600.8 129.1c34.4-1.9 63.6 24.5 65.5 58.8l8.8 165.7c1.9 34.4-24.5 63.6-58.8 65.5-34.4 1.9-63.6-24.5-65.5-58.8L542 194.6c-1.7-34.4 24.6-63.8 58.8-65.5z" fill="#91CE55" p-id="16420"/><path d="M616.9 288.3l110.9-123.5c23-25.5 62.3-27.7 87.8-4.7s27.7 62.3 4.7 87.8l-111 123.5c-23 25.5-62.3 27.7-87.8 4.7s-27.6-62.3-4.6-87.8z" fill="#A4CE4E" p-id="16421"/><path d="M626.3 304.2l165.7-8.8c34.4-1.9 63.6 24.5 65.5 58.8 1.9 34.4-24.5 63.6-58.8 65.5L633 428.5c-34.4 1.9-63.6-24.5-65.5-58.8-1.8-34.4 24.5-63.6 58.8-65.5z" fill="#A1D72B" p-id="16422"/><path d="M697.1 279.9c79.7 71.6 89.6 193 22.6 276.7-2.3 3.1-4.8 6-7.4 8.8-5.5 6.3-11.5 12.2-17.9 17.5-104.8 107.2-224.2 198.9-354.6 272.5l-5.3 2.9c-46.1 24.5-102.7 17.6-141.6-17.2s-51.9-90.4-32.3-138.9c-0.1-1.9 1.6-3.9 2.4-5.6 59.4-137.6 137.9-266.2 233-382 4.7-6.8 9.9-13.4 15.5-19.5 2.7-2.9 5.3-5.6 8.2-8.2 75.9-75.5 197.7-78.5 277.4-7z" fill="#FF4601" p-id="16423"/><path d="M598.3 233c90.6 81 102.3 218.7 26.5 313.6-2.8 3.6-5.6 6.8-8.3 9.9-6.5 7.2-13.6 13.9-21.3 19.9a1811.3 1811.3 0 0 1-365 287.3c-30.7-12.2-55.3-36.1-68.3-66.4-13.1-30.3-13.5-64.7-1.2-95.3-0.1-1.9 1.6-3.9 2.4-5.6 10.3-23.4 20.9-46.8 32.3-69.9 9.9-20.6 20.5-41 31.5-61.4 11.1-20.3 23.5-41.7 37.2-64.3 11.8-19.2 23.9-38.2 36.6-56.9 13.9-20.9 28.1-41.2 42.2-61 13.1-18 26.9-35.8 40.9-53.1 3.9-5.2 8-10.3 12.2-15.2 4.7-6.8 9.9-13.4 15.5-19.5 2.7-2.9 5.3-5.6 8.2-8.2 46.1-46.2 112-67.2 176.4-56.1l2.2 2.2z" fill="#F86F1F" p-id="16424"/><path d="M226.3 564.4l64.4 57.9c11.2 7.1 17.1 20.2 15.1 33.3s-11.6 23.8-24.5 27.1c-12.8 3.5-26.5-1.1-34.8-11.4l-52-45.7c10.3-20.4 20.7-40.8 31.8-61.2zM299.8 447.5l107.3 96.4c10.3 12.8 9.8 31-1.2 43.3-11 12.2-29.1 14.7-42.9 5.9l-99.8-88.5c11.6-19.4 23.9-38.4 36.6-57.1zM382.3 333.2l83 74.5c10.3 12.8 9.8 31-1.2 43.3-11 12.2-29.1 14.7-42.9 5.9L342 385.7c12.6-17.3 26.1-35.3 40.3-52.5z" fill="#F4C1A8" p-id="16425"/><path d="M573.3 240.2c-21.9-2-44 2-63.8 11.8-6.7 3.3-2.1 14 4.7 10.7 18-8.8 37.8-12.7 57.9-10.8 7.5 0.6 8.7-11.1 1.2-11.7zM487.3 266.1c-4.7-5.9-13.9 1.5-9.1 7.4 4.7 5.8 13.8-1.5 9.1-7.4z" fill="#FFFFFF" p-id="16426"/></svg><br>ä»£ç æ˜¯ä¸‹é¢é…±ç´«çš„ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span></span></span><br><span class="line"><span class="tag">  <span class="attr">t</span>=<span class="string">"1619407493821"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">"icon"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">viewBox</span>=<span class="string">"0 0 1024 1024"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">version</span>=<span class="string">"1.1"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">p-id</span>=<span class="string">"16419"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">width</span>=<span class="string">"200"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">height</span>=<span class="string">"200"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">    <span class="attr">d</span>=<span class="string">"M600.8 129.1c34.4-1.9 63.6 24.5 65.5 58.8l8.8 165.7c1.9 34.4-24.5 63.6-58.8 65.5-34.4 1.9-63.6-24.5-65.5-58.8L542 194.6c-1.7-34.4 24.6-63.8 58.8-65.5z"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">fill</span>=<span class="string">"#91CE55"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">p-id</span>=<span class="string">"16420"</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">    <span class="attr">d</span>=<span class="string">"M616.9 288.3l110.9-123.5c23-25.5 62.3-27.7 87.8-4.7s27.7 62.3 4.7 87.8l-111 123.5c-23 25.5-62.3 27.7-87.8 4.7s-27.6-62.3-4.6-87.8z"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">fill</span>=<span class="string">"#A4CE4E"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">p-id</span>=<span class="string">"16421"</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">    <span class="attr">d</span>=<span class="string">"M626.3 304.2l165.7-8.8c34.4-1.9 63.6 24.5 65.5 58.8 1.9 34.4-24.5 63.6-58.8 65.5L633 428.5c-34.4 1.9-63.6-24.5-65.5-58.8-1.8-34.4 24.5-63.6 58.8-65.5z"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">fill</span>=<span class="string">"#A1D72B"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">p-id</span>=<span class="string">"16422"</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">    <span class="attr">d</span>=<span class="string">"M697.1 279.9c79.7 71.6 89.6 193 22.6 276.7-2.3 3.1-4.8 6-7.4 8.8-5.5 6.3-11.5 12.2-17.9 17.5-104.8 107.2-224.2 198.9-354.6 272.5l-5.3 2.9c-46.1 24.5-102.7 17.6-141.6-17.2s-51.9-90.4-32.3-138.9c-0.1-1.9 1.6-3.9 2.4-5.6 59.4-137.6 137.9-266.2 233-382 4.7-6.8 9.9-13.4 15.5-19.5 2.7-2.9 5.3-5.6 8.2-8.2 75.9-75.5 197.7-78.5 277.4-7z"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">fill</span>=<span class="string">"#FF4601"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">p-id</span>=<span class="string">"16423"</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">    <span class="attr">d</span>=<span class="string">"M598.3 233c90.6 81 102.3 218.7 26.5 313.6-2.8 3.6-5.6 6.8-8.3 9.9-6.5 7.2-13.6 13.9-21.3 19.9a1811.3 1811.3 0 0 1-365 287.3c-30.7-12.2-55.3-36.1-68.3-66.4-13.1-30.3-13.5-64.7-1.2-95.3-0.1-1.9 1.6-3.9 2.4-5.6 10.3-23.4 20.9-46.8 32.3-69.9 9.9-20.6 20.5-41 31.5-61.4 11.1-20.3 23.5-41.7 37.2-64.3 11.8-19.2 23.9-38.2 36.6-56.9 13.9-20.9 28.1-41.2 42.2-61 13.1-18 26.9-35.8 40.9-53.1 3.9-5.2 8-10.3 12.2-15.2 4.7-6.8 9.9-13.4 15.5-19.5 2.7-2.9 5.3-5.6 8.2-8.2 46.1-46.2 112-67.2 176.4-56.1l2.2 2.2z"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">fill</span>=<span class="string">"#F86F1F"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">p-id</span>=<span class="string">"16424"</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">    <span class="attr">d</span>=<span class="string">"M226.3 564.4l64.4 57.9c11.2 7.1 17.1 20.2 15.1 33.3s-11.6 23.8-24.5 27.1c-12.8 3.5-26.5-1.1-34.8-11.4l-52-45.7c10.3-20.4 20.7-40.8 31.8-61.2zM299.8 447.5l107.3 96.4c10.3 12.8 9.8 31-1.2 43.3-11 12.2-29.1 14.7-42.9 5.9l-99.8-88.5c11.6-19.4 23.9-38.4 36.6-57.1zM382.3 333.2l83 74.5c10.3 12.8 9.8 31-1.2 43.3-11 12.2-29.1 14.7-42.9 5.9L342 385.7c12.6-17.3 26.1-35.3 40.3-52.5z"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">fill</span>=<span class="string">"#F4C1A8"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">p-id</span>=<span class="string">"16425"</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">    <span class="attr">d</span>=<span class="string">"M573.3 240.2c-21.9-2-44 2-63.8 11.8-6.7 3.3-2.1 14 4.7 10.7 18-8.8 37.8-12.7 57.9-10.8 7.5 0.6 8.7-11.1 1.2-11.7zM487.3 266.1c-4.7-5.9-13.9 1.5-9.1 7.4 4.7 5.8 13.8-1.5 9.1-7.4z"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">fill</span>=<span class="string">"#FFFFFF"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">p-id</span>=<span class="string">"16426"</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å‰é¢è¯´ canvas å¯¹æ–‡æœ¬æ”¯æŒå¼±çˆ†äº†ï¼Œä½†å…¶å®ï¼Œsvg ä¹Ÿæ˜¯åŠæ–¤å…«ä¸¤çš„ï¼Œå¦‚æœ svg ä¸­çš„æ–‡å­—å¯ä»¥è·Ÿ css ä¸­çš„è¡¨ç°ä¸€æ ·å°±å¥½äº†ã€‚è¯¶å˜¿è¿˜çœŸçš„æœ‰ï¼Œå®ƒé‡Œé¢å…¶å®æœ‰ä¸ª <code>&lt;foreignObject/&gt;</code> æ ‡ç­¾ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½¿ç”¨ svg çš„è¯ï¼Œæˆ‘ä»¬ä¸å†éœ€è¦ä¸€ç‚¹ç‚¹çš„éå†ï¼Œè½¬æ¢èŠ‚ç‚¹ï¼›ä¸ç”¨å†è®¡ç®—å¤æ‚çš„å…ƒç´ ä¼˜å…ˆçº§ï¼Œåªéœ€è¦ä¸€è‚¡è„‘çš„å°†è¦æ¸²æŸ“çš„ DOM æ‰”è¿› <code>&lt;foreignObject/&gt;</code> å°±å¥½äº†ï¼Œå‰©ä¸‹çš„å°±äº¤ç»™æµè§ˆå™¨å»æ¸²æŸ“ã€‚<del>ä¸è¦ 998ï¼Œä¸è¦ 98ï¼Œé€šé€š 9 å— 9ï¼</del></p>
<h3 id="foreignObject-ç®€ä»‹"><a href="#foreignObject-ç®€ä»‹" class="headerlink" title="foreignObject ç®€ä»‹"></a>foreignObject ç®€ä»‹</h3><blockquote>
<p>SVG ä¸­çš„ <code>&lt;foreignObject&gt;</code> å…ƒç´ å…è®¸åŒ…å«æ¥è‡ªä¸åŒçš„ XML å‘½åç©ºé—´çš„å…ƒç´ ã€‚åœ¨æµè§ˆå™¨çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œå¾ˆå¯èƒ½æ˜¯ XHTML / HTMLã€‚</p>
</blockquote>
<p>æ¯”å¦‚ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">viewBox</span>=<span class="string">"0 0 200 200"</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    polygon &#123;</span><br><span class="line">      fill: black;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    div &#123;</span><br><span class="line">      color: white;</span><br><span class="line">      font: 18px serif;</span><br><span class="line">      height: 100%;</span><br><span class="line">      overflow: auto;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">polygon</span> <span class="attr">points</span>=<span class="string">"5,5 195,10 185,185 10,195"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- Common use case: embed HTML text into SVG --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">foreignObject</span> <span class="attr">x</span>=<span class="string">"20"</span> <span class="attr">y</span>=<span class="string">"20"</span> <span class="attr">width</span>=<span class="string">"160"</span> <span class="attr">height</span>=<span class="string">"160"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      In the context of SVG embeded into HTML, the XHTML namespace could</span></span><br><span class="line"><span class="comment">      be avoided, but it is mandatory in the context of an SVG document</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/1999/xhtml"</span>&gt;</span></span><br><span class="line">      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed mollis mollis</span><br><span class="line">      mi ut ultricies. Nullam magna ipsum, porta vel dui convallis, rutrum</span><br><span class="line">      imperdiet eros. Aliquam erat volutpat.</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">foreignObject</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å…·ä½“å…¶ä»–å±æ€§å¯ä»¥<a href="https://developer.mozilla.org/zh-CN/docs/Web/SVG/Element/foreignObject" target="_blank" rel="noopener">çœ‹è¿™é‡Œ</a></p>
<p>é‚£æˆ‘ä»¬å†å›åˆ°ä¸»é¢˜ä¸Šï¼Œæœ‰äº† <code>foreignObject</code> è¿™ä¸ªåˆ©å™¨ï¼Œæˆ‘ä»¬çš„å®ç°æ€è·¯å°±ç®€å•å¾ˆå¤šäº†ï¼š</p>
<ol>
<li>é¦–å…ˆè·å–åˆ°ä½ éœ€è¦çš„ domï¼ŒæŠŠå®ƒç»™è½¬æˆéœ€è¦çš„ xml æ ¼å¼</li>
<li>å£°æ˜ä¸€ä¸ªåŸºç¡€çš„ svg æ¨¡ç‰ˆï¼Œè¿™ä¸ªæ¨¡ç‰ˆéœ€è¦ä¸€äº›åŸºç¡€çš„æè¿°ä¿¡æ¯ï¼Œæœ€é‡è¦çš„ï¼Œå®ƒè¦æœ‰ <code>&lt;foreignObject/&gt;</code> è¿™å¯¹æ ‡ç­¾</li>
<li>å°†è¦è½¬æ¢å¥½çš„ dom æ¨¡ç‰ˆæ¨¡ç‰ˆåµŒå…¥ <code>foreignObject</code> æ ‡ç­¾å†…</li>
<li>åˆ©ç”¨ <code>Blob</code> æ„å»º svg å›¾åƒï¼Œå–å‡º <code>URL</code>ï¼Œèµ‹å€¼ç»™ img</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span> <span class="attr">style</span>=<span class="string">"background: pink;"</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"background: orange;"</span>&gt;</span></span><br><span class="line">    break word break word break word break word break word</span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">html2Svg</span>(<span class="params">domStr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> svgXML = <span class="string">`&lt;svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"&gt;</span></span><br><span class="line"><span class="string">                &lt;foreignObject width="100%" height="100%"&gt;<span class="subst">$&#123;generateXML(</span></span></span><br><span class="line"><span class="string"><span class="subst">                  domStr</span></span></span><br><span class="line"><span class="string"><span class="subst">                )&#125;</span>&lt;/foreignObject&gt;</span></span><br><span class="line"><span class="string">             &lt;/svg&gt;`</span>;</span><br><span class="line">  <span class="keyword">const</span> svg = <span class="keyword">new</span> Blob([svgXML], &#123; <span class="attr">type</span>: <span class="string">"image/svg+xml"</span> &#125;);</span><br><span class="line">  <span class="keyword">let</span> url = <span class="built_in">window</span>.URL.createObjectURL(svg);</span><br><span class="line">  <span class="keyword">let</span> img = <span class="keyword">new</span> Image();</span><br><span class="line">  img.src = url;</span><br><span class="line">  <span class="keyword">return</span> img;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”±äº `foreignObject`åªèƒ½å¼•ç”¨XMLæ–‡æ¡£ï¼Œ</span></span><br><span class="line"><span class="comment">// æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹DOMè¿›è¡Œæ ¼å¼åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generateXML</span>(<span class="params">domStr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> doc = <span class="built_in">document</span>.implementation.createHTMLDocument(<span class="string">""</span>);</span><br><span class="line">  doc.write(domStr);</span><br><span class="line">  doc.documentElement.setAttribute(<span class="string">"xmlns"</span>, doc.documentElement.namespaceURI);</span><br><span class="line">  doc = parseStyle(doc);</span><br><span class="line">  <span class="keyword">let</span> html = <span class="keyword">new</span> XMLSerializer()</span><br><span class="line">    .serializeToString(doc)</span><br><span class="line">    .replace(<span class="string">"&lt;!DOCTYPE html&gt;"</span>, <span class="string">""</span>);</span><br><span class="line">  <span class="keyword">return</span> html;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªå®ç°çš„æ€è·¯è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå› ä¸ºçœç•¥äº†è§£æ dom çš„éƒ¨åˆ†ï¼Œæ‰€ä»¥å°±ä¸éœ€è¦å¤æ‚çš„è®¡ç®—å’Œé€’å½’ï¼Œæ¸²æŸ“é€Ÿåº¦è‡ªç„¶è¦ä¼˜äºå‰è€…ã€‚å·´ç‰¹ï¼Œä¸€ä¸ªæœ€ä¸ºä¸¥è‚ƒçš„é—®é¢˜åœ¨äºï¼šsvg æ— æ³•åŠ è½½å¤–éƒ¨èµ„æºï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ svg é‡Œé¢ï¼Œæ— è®ºæ˜¯å›¾ç‰‡è¿˜æ˜¯ css ä¸­çš„èƒŒæ™¯å›¾ï¼Œè¿™äº›èµ„æºéƒ½æ˜¯æ— æ³•åŠ è½½çš„ã€‚åœ¨ä½¿ç”¨ canvas å®ç°æ—¶ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ä¸€ä¸ª node ä¸€ä¸ª node å»ç”»ï¼Œæ‰€ä»¥ä¸å­˜åœ¨èµ„æºå¼•ç”¨çš„é—®é¢˜ã€‚ä½†ä½¿ç”¨ svg å®ç°ï¼Œç›¸å½“äºæˆ‘ä»¬æŠŠæ–‡æ¡£äº¤ç»™ svg æ¥æ¸²æŸ“ä¸€éï¼Œè¿™å¯¹äºæˆ‘ä»¬æ¥è¯´æ˜¯å…¶å®æ˜¯æ— æ³•æ§åˆ¶çš„é»‘ç›’æ“ä½œï¼Œæ˜¯å— svg æ§åˆ¶çš„ã€‚<br>é‚£æœ‰æ— åŠæ³•æ¥è§£å†³æï¼Œ<a href="https://github.com/cburgmer/rasterizeHTML.js" target="_blank" rel="noopener">rasterizeHTML.js</a>è¿™ä¸ªåº“é‡Œï¼Œä½œè€…ç”¨ä¸€ç³»åˆ—çš„ hack æŠ€å·§ç»•è¿‡æ¥è®¸å¤šé™åˆ¶ï¼Œæ¯”å¦‚ï¼šå°†<code>&lt;img/&gt;</code>çš„ url è½¬ä¸º <code>dataURI</code>ï¼›å°† <code>background</code> ä» <code>style</code> ä¸­å–å‡ºï¼Œä¿®æ”¹ <code>url</code> åé‡æ–°æ’å…¥æ ·å¼è¡¨ï¼›å°† <code>link</code> çš„çš„æ ·å¼é€šè¿‡ <code>ajax</code> down ä¸‹æ¥ç„¶åæ³¨å…¥<code>&lt;style/&gt;</code>ç­‰ç­‰ç­‰ç­‰â€¦æ„Ÿå…´è¶£å¯ä»¥å»åº“é‡Œçœ‹çœ‹å®ç°ã€‚ä¸è¿‡ hack æŠ€å·§ä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ï¼Œä½œè€…åœ¨ readme é‡Œç»™å‡ºäº†è¯¦ç»†çš„ <a href="https://github.com/cburgmer/rasterizeHTML.js/wiki/Limitations" target="_blank" rel="noopener">Full list of limitations</a></p>
<p><img src="/2021/04/25/html-to-img/10.jpg" alt="img"><br>å³ä¾¿æ˜¯åˆ¨é™¤å‰è¿°æåˆ°çš„é—®é¢˜ï¼Œsvg æ–¹æ¡ˆè¿˜æœ‰ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯æˆ‘ä»¬è§‰å¾—æ–¹ä¾¿çš„ <code>foreignObject</code>ï¼Œå®ƒå®Œå…¨ä¸æ”¯æŒ ie æµè§ˆå™¨ï¼Œä¸‹é¢æ˜¯å®˜æ–¹ç»™å‡ºçš„æ”¯æŒåº¦<br><img src="/2021/04/25/html-to-img/11.jpg" alt="img"><br>å¦å¤– safari æµè§ˆå™¨ä¹Ÿå‡ºäºå®‰å…¨ç­–ç•¥çš„åŸå› æ”¯æŒåº¦è¾ƒå·®ï¼ˆ<a href="https://github.com/tsayen/dom-to-image/issues/27" target="_blank" rel="noopener">è¯¦ç»†æˆ³è¿™é‡Œ</a>ï¼‰ï¼ŒåŒ…æ‹¬ <code>dom-to-image</code> ä½œè€…ä¹Ÿæ˜¯æ¨èåœ¨æœåŠ¡ç«¯æ¸²æŸ“å¥½å›¾ç‰‡</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å†™åˆ°è¿™é‡Œçš„è¯ï¼Œå‰ç«¯ç”Ÿæˆæµ·æŠ¥çš„å¤§è‡´æ–¹æ¡ˆå°±åŸºæœ¬ä¸Šæ¶µç›–å…¨äº†ï¼Œéœ€è¦å“ªç§é è°±çš„æ–¹æ¡ˆç›¸ä¿¡å¤§å®¶å¿ƒé‡Œå·²ç»æœ‰æ•°äº†ã€‚<br>å¦‚æœæ˜¯æƒ³åšä¸€ä¸ªå‰ç«¯ç”Ÿæˆå›ºå®šçš„æµ·æŠ¥çš„è¯ï¼Œæˆ‘æ˜¯æ¨èç›´æ¥ canvas æŠŠé‚£äº›ç®€å•çš„å…ƒç´ ç”»å‡ºæ¥ï¼Œæ„Ÿè§‰è¿™ç§æ–¹æ¡ˆç›®å‰çš„å…¼å®¹æ€§æœ€é«˜ï¼Œä»£ç ä¹Ÿç›¸å¯¹ç®€æ´ï¼Œå¹¶ä¸”ç½‘ä¸Šå·²ç»æœ‰å¯¹æ–‡æœ¬æ¢è¡Œç­‰ä¸€ç³»åˆ—ç»†èŠ‚çš„å¤„ç†æ–¹æ¡ˆäº†ï¼ŒåŸºæœ¬ä¸Šæ²¡ä»€ä¹ˆè¸©å‘çš„ç‚¹ï¼ˆ<small><del>æ‚„æ‚„çœ‹äº†ä¸‹ï¼Œæˆ‘ä»¬çš„å‹å•†å®ç°æ–¹æ¡ˆä¹Ÿæ˜¯è¿™ä¸ª</del></small>ï¼‰ã€‚ä½†æ˜¯å¦‚æœæ˜¯è¦å®ç°ä¸€ä¸ªç±»ä¼¼å‰ç«¯æˆªå±çš„ç”Ÿæˆå›¾ç‰‡çš„è¯ï¼Œé‚£ä¹ˆè¿˜æ˜¯çœ‹ä½ çš„ä¾§é‡ç‚¹ï¼Œæ˜¯çœ‹é‡å…¼å®¹æ€§è¿˜æ˜¯çœ‹é‡è¿˜åŸåº¦ï¼Œç„¶åæŒ‰éœ€é€‰æ‹©ï¼Œæœ¬æ–‡å°±ä¸åšå®‰åˆ©äº†ã€‚</p>
<p>å¸Œæœ›å¤§å®¶ä»¥åæœ‰ç±»ä¼¼çš„éœ€æ±‚åœºæ™¯æ—¶ï¼Œæœ¬æ–‡èƒ½å¯¹ä½ ä»¬æœ‰äº›å¸®åŠ©ã€‚å°±é…±ï¼Œæ°æ°~</p>

    </div>

    
    
    

    <div>
      
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------æœ¬æ–‡ç»“æŸ<i class="fa fa-paw"></i>æ„Ÿè°¢æ‚¨çš„é˜…è¯»-------------</div>
    
</div>
      
    </div>

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/03/28/about-hoc/" rel="prev" title="é«˜é˜¶ç»„ä»¶">
      <i class="fa fa-chevron-left"></i> é«˜é˜¶ç»„ä»¶
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/11/28/vite/" rel="next" title="å†™å†™ Vite">
      å†™å†™ Vite <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#html2canvas"><span class="nav-number">1.</span> <span class="nav-text">html2canvas</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#dom-to-img"><span class="nav-number">2.</span> <span class="nav-text">dom-to-img</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#puppeteer-screenshot"><span class="nav-number">3.</span> <span class="nav-text">puppeteer - screenshot</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å®ç°åŸç†"><span class="nav-number">4.</span> <span class="nav-text">å®ç°åŸç†</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#canvas-æ–¹æ¡ˆ"><span class="nav-number">4.1.</span> <span class="nav-text">canvas æ–¹æ¡ˆ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#svg-æ–¹æ¡ˆ"><span class="nav-number">4.2.</span> <span class="nav-text">svg æ–¹æ¡ˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#foreignObject-ç®€ä»‹"><span class="nav-number">4.2.1.</span> <span class="nav-text">foreignObject ç®€ä»‹</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#æ€»ç»“"><span class="nav-number">5.</span> <span class="nav-text">æ€»ç»“</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="å®‹ç§‹æ™“"
      src="/images/head.png">
  <p class="site-author-name" itemprop="name">å®‹ç§‹æ™“</p>
  <div class="site-description" itemprop="description">æœˆäº®æ˜¯æˆ‘æŠ›çš„ç¡¬å¸ğŸŒ™ ä¸¤è¾¹éƒ½æ˜¯æ¢¦è§ä½ </div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">21</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">æ ‡ç­¾</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">å®‹ç§‹æ™“</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> å¼ºåŠ›é©±åŠ¨
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

  
  <script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
  
  1
  <script type="text/javascript" src="/js/love.js"></script>
</body>
</html>
